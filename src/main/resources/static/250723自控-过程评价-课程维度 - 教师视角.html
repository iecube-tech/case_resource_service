<!DOCTYPE html>
<html lang="zh-CN" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>课程能力评价系统 - IECUBE</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://unpkg.com/chart.js"></script>
    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- D3.js for Sankey Diagram -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                            950: '#082f49',
                        },
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        [x-cloak] { display: none !important; }

        /* 平滑滚动 */
        html {
            scroll-behavior: smooth;
        }

        /* 卡片悬停效果 */
        .hover-card {
            transition: all 0.2s ease;
        }
        .hover-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        /* 加载动画 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        /* 各个图表容器样式 */
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        
        /* 进度条动画 */
        @keyframes progress {
            from { width: 0; }
            to { width: 100%; }
        }
        
        .animate-progress {
            animation: progress 1s ease-out;
        }
        
        /* 时间线样式 */
        .timeline-container {
            position: relative;
            padding-left: 30px;
        }
        
        .timeline-line {
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 1px;
            background-color: #e5e7eb;
        }
        
        .dark .timeline-line {
            background-color: #4b5563;
        }
        
        .timeline-dot {
            position: absolute;
            left: 11px;
            width: 9px;
            height: 9px;
            border-radius: 50%;
            background-color: #0ea5e9;
        }
        /* 连接线样式 */
        .connection-line {
            stroke: #6b7280;
            stroke-width: 2;
            opacity: 0.6;
            transition: all 0.3s ease;
        }
        
        .connection-line:hover {
            stroke-width: 3;
            opacity: 1;
        }
        
        .connection-line.active {
            stroke: #3b82f6;
            stroke-width: 3;
            opacity: 1;
        }
        
        /* 能力标签卡片样式 */
        .ability-card {
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .ability-card:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .ability-card.selected {
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
            border: 2px solid #3b82f6;
        }
        
        /* 实验组标题样式 - 紧凑版 */
        .experiment-title {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            border-left: 4px solid #6b7280;
            font-weight: 600;
            text-align: center;
            padding: 4px 2px;
            border-radius: 4px;
            margin-bottom: 6px;
            font-size: 12px;
            line-height: 1.2;
        }
        
        /* 能力标签根据课程目标的颜色 - 紧凑版 */
        .tag-objective-1 { 
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: #1e40af;
        }
        .tag-objective-1:hover { background: rgba(59, 130, 246, 0.2); }
        
        .tag-objective-2 { 
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: #047857;
        }
        .tag-objective-2:hover { background: rgba(16, 185, 129, 0.2); }
        
        .tag-objective-3 { 
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            color: #92400e;
        }
        .tag-objective-3:hover { background: rgba(245, 158, 11, 0.2); }
        
        .tag-objective-4 { 
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #b91c1c;
        }
        .tag-objective-4:hover { background: rgba(239, 68, 68, 0.2); }
        
        /* 深色模式适配 */
        .dark .tag-objective-1 { 
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.4);
            color: #93c5fd;
        }
        .dark .tag-objective-2 { 
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.4);
            color: #6ee7b7;
        }
        .dark .tag-objective-3 { 
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid rgba(245, 158, 11, 0.4);
            color: #fbbf24;
        }
        .dark .tag-objective-4 { 
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.4);
            color: #fca5a5;
        }
        
        /* 紧凑型能力标签 */
        .ability-tag-compact {
            padding: 8px 6px;
            border-radius: 4px;
            text-align: center;
            font-size: 12px;
            line-height: 1.1;
            cursor: pointer;
            transition: all 0.1s ease;
            margin-bottom: 4px;
            min-height: 42px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        /* 圆形进度条 */
        .circle-progress {
            transform: rotate(-90deg);
        }
        
        /* 能力类别颜色 */
        .category-basic { border-left: 4px solid #3b82f6; }
        .category-design { border-left: 4px solid #10b981; }
        .category-operation { border-left: 4px solid #f59e0b; }
        .category-analysis { border-left: 4px solid #ef4444; }
        .category-theory { border-left: 4px solid #8b5cf6; }
        .category-advanced { border-left: 4px solid #06b6d4; }
        
        /* 桑基图容器 */
        .sankey-container {
            min-height: 400px;
        }
        
        /* 筛选器样式 */
        .filter-chip {
            transition: all 0.2s ease;
        }
        
        .filter-chip.active {
            background-color: #3b82f6;
            color: white;
        }

        /* 滑块样式 */
        .slider {
            background: linear-gradient(to right, #e5e7eb 0%, #e5e7eb 100%);
        }

        .slider::-webkit-slider-thumb {
            appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: 2px solid #ffffff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .slider::-moz-range-thumb {
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: 2px solid #ffffff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .dark .slider::-webkit-slider-thumb {
            background: #60a5fa;
        }

        .dark .slider::-moz-range-thumb {
            background: #60a5fa;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100 transition-colors duration-200" 
      x-data="{ 
          darkMode: localStorage.getItem('darkMode') === 'true' || (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches), 
          teacherTab: 'courseOverview',
          selectedSemester: '202504',
          selectedExperiment: '超前校正补偿器的设计',
          abilityTab: 'experiment1',
          selectedCategory: 'all',
          selectedObjective: null,
          searchTerm: ''
      }"
      x-init="$watch('darkMode', val => {
          localStorage.setItem('darkMode', val)
          if (val) document.documentElement.classList.add('dark')
          else document.documentElement.classList.remove('dark')
      }); 
      if (darkMode) document.documentElement.classList.add('dark')"
      x-cloak>

    <!-- 导航栏 -->
    <nav class="bg-white dark:bg-gray-800 shadow sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex">
                    <div class="flex-shrink-0 flex items-center">
                        <span class="text-xl font-bold text-primary-600 dark:text-primary-400">IECUBE</span>
                        <span class="ml-2 text-lg text-gray-700 dark:text-gray-300">课程能力评价系统</span>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                                     
                    <!-- 深色模式切换 -->
                    <button @click="darkMode = !darkMode" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                        <i class="fas fa-moon text-gray-600 dark:hidden"></i>
                        <i class="fas fa-sun text-yellow-300 hidden dark:block"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主内容区 -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- 教师视角 -->
        <div class="space-y-8 fade-in">
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-900 dark:text-white">自动控制原理课程管理</h1>
                        <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">
                            <span x-text="selectedSemester"></span> | 班级: 电子2301 | 学生人数: 62人
                        </p>
                    </div>
                    <div class="text-sm text-gray-500 dark:text-gray-400">
                        更新时间: 2025-05-18 16:30
                    </div>
                </div>

                <!-- 教师页面标签栏 -->
                <div class="mt-6 border-b border-gray-200 dark:border-gray-700">
                    <div class="flex space-x-8">
                        <button @click="teacherTab = 'courseOverview'" 
                                class="py-4 text-sm font-medium border-b-2 transition-colors focus:outline-none"
                                :class="teacherTab === 'courseOverview' ? 'border-primary-500 text-primary-600 dark:text-primary-400' : 'border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'">
                            课程概览
                        </button>
                        <button @click="teacherTab = 'experiments'" 
                                class="py-4 text-sm font-medium border-b-2 transition-colors focus:outline-none"
                                :class="teacherTab === 'experiments' ? 'border-primary-500 text-primary-600 dark:text-primary-400' : 'border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'">
                            实验分析
                        </button>
                        <button @click="teacherTab = 'students'" 
                                class="py-4 text-sm font-medium border-b-2 transition-colors focus:outline-none"
                                :class="teacherTab === 'students' ? 'border-primary-500 text-primary-600 dark:text-primary-400' : 'border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'">
                            学生分析
                        </button>
                        <button @click="teacherTab = 'abilities'" 
                                class="py-4 text-sm font-medium border-b-2 transition-colors focus:outline-none"
                                :class="teacherTab === 'abilities' ? 'border-primary-500 text-primary-600 dark:text-primary-400' : 'border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'">
                            课程目标
                        </button>
                        <button @click="teacherTab = 'reports'" 
                                class="py-4 text-sm font-medium border-b-2 transition-colors focus:outline-none"
                                :class="teacherTab === 'reports' ? 'border-primary-500 text-primary-600 dark:text-primary-400' : 'border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'">
                            教学报告
                        </button>
                        <button @click="teacherTab = 'gradeSettings'" 
                                class="py-4 text-sm font-medium border-b-2 transition-colors focus:outline-none"
                                :class="teacherTab === 'gradeSettings' ? 'border-primary-500 text-primary-600 dark:text-primary-400' : 'border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'">
                            成绩设置
                        </button>
                    </div>
                </div>

                <!-- 课程概览 -->
                <div x-show="teacherTab === 'courseOverview'" class="mt-6 space-y-6 fade-in">
                    <!-- 关键指标卡片 -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 hover-card">
                            <div class="flex justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500 dark:text-gray-400">课程平均分</p>
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white mt-1">83.6</p>
                                </div>
                                <div class="h-12 w-12 rounded-md bg-blue-100 dark:bg-blue-900 flex items-center justify-center">
                                    <i class="fas fa-chart-line text-blue-600 dark:text-blue-400 text-xl"></i>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="flex items-center">
                                    <i class="fas fa-arrow-up text-green-500 mr-1"></i>
                                    <span class="text-xs text-green-500">3.2%</span>
                                    <span class="text-xs text-gray-500 dark:text-gray-400 ml-1">vs 上学期（前端实现时考虑有对比则显示，无对比数据则不显示）</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 hover-card">
                            <div class="flex justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500 dark:text-gray-400">实验完成情况</p>
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white mt-1">3/6</p>
                                </div>
                                <div class="h-12 w-12 rounded-md bg-green-100 dark:bg-green-900 flex items-center justify-center">
                                    <i class="fas fa-tasks text-green-600 dark:text-green-400 text-xl"></i>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="flex items-center">
                                    <i class="fas fa-check-circle text-green-500 mr-1"></i>
                                    <span class="text-xs text-green-500">进度正常</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 hover-card">
                            <div class="flex justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500 dark:text-gray-400">学生总数</p>
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white mt-1">62 人</p>
                                </div>
                                <div class="h-12 w-12 rounded-md bg-purple-100 dark:bg-purple-900 flex items-center justify-center">
                                    <i class="fas fa-users text-purple-600 dark:text-purple-400 text-xl"></i>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="flex items-center">
                                    <i class="fas fa-arrow-up text-green-500 mr-1"></i>
                                    <span class="text-xs text-green-500">8.1%</span>
                                    <span class="text-xs text-gray-500 dark:text-gray-400 ml-1">vs 上学期</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 hover-card">
                            <div class="flex justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-500 dark:text-gray-400">AI互动总量</p>
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white mt-1">3428 次</p>
                                </div>
                                <div class="h-12 w-12 rounded-md bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center">
                                    <i class="fas fa-robot text-indigo-600 dark:text-indigo-400 text-xl"></i>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="flex items-center">
                                    <i class="fas fa-arrow-up text-green-500 mr-1"></i>
                                    <span class="text-xs text-green-500">5.2%</span>
                                    <span class="text-xs text-gray-500 dark:text-gray-400 ml-1">vs 上学期</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 课程进度 -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- 课程完成进度 -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 hover-card">
                            <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">课程进度概览</h3>
                            <div class="chart-container">
                                <canvas id="courseProgressChart"></canvas>
                            </div>
                        </div>
                        
                        <!-- 能力达成情况 -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 hover-card">
                            <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">课程目标达成分析</h3>
                            <div class="chart-container">
                                <canvas id="abilityAchievementChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 班级成绩分析 -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- 成绩分布 -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 hover-card">
                            <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">班级成绩分布</h3>
                            <div class="chart-container">
                                <canvas id="classScoreDistributionChart"></canvas>
                            </div>
                        </div>
                        
                        <!-- 各实验得分情况 -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 hover-card md:col-span-2">
                            <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">实验得分情况</h3>
                            <div class="chart-container">
                                <canvas id="experimentScoresChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 上一学期对比 -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">与上学期对比分析（若无对比数据则不显示上学期数据）</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="chart-container md:col-span-2">
                                <canvas id="semesterComparisonChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- AI辅助教学分析 -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">AI辅助教学分析</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg h-full">
                                    <h4 class="text-md font-medium text-gray-800 dark:text-gray-200 mb-3">AI互动数据</h4>
                                    <div class="space-y-4">
                                        <div>
                                            <div class="flex justify-between mb-1">
                                                <span class="text-sm font-medium text-gray-700 dark:text-gray-300">学生使用率</span>
                                                <span class="text-sm font-medium text-green-600 dark:text-green-400">85%</span>
                                            </div>
                                            <div class="w-full bg-white dark:bg-gray-600 rounded-full h-2.5">
                                                <div class="bg-green-500 h-2.5 rounded-full" style="width: 85%"></div>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <div class="flex justify-between mb-1">
                                                <span class="text-sm font-medium text-gray-700 dark:text-gray-300">问题解决率（根据实现难度选择是否实现）</span>
                                                <span class="text-sm font-medium text-green-600 dark:text-green-400">78%</span>
                                            </div>
                                            <div class="w-full bg-white dark:bg-gray-600 rounded-full h-2.5">
                                                <div class="bg-green-500 h-2.5 rounded-full" style="width: 78%"></div>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <div class="flex justify-between mb-1">
                                                <span class="text-sm font-medium text-gray-700 dark:text-gray-300">平均互动频次</span>
                                                <span class="text-sm font-medium text-gray-600 dark:text-gray-400">4.2次/学生</span>
                                            </div>
                                            <div class="w-full bg-white dark:bg-gray-600 rounded-full h-2.5">
                                                <div class="bg-blue-500 h-2.5 rounded-full" style="width: 70%"></div>
                                            </div>
                                        </div>
                                        
                                        <div class="mt-4">
                                            <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">总互动次数</h5>
                                            <p class="text-3xl font-bold text-primary-600 dark:text-primary-400">3,428</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                                                较上学期增长42.3%
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="md:col-span-2">
                                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                    <h4 class="text-md font-medium text-gray-800 dark:text-gray-200 mb-3">AI互动主题分析（似乎只能通过AI来分析，需要考虑实现难度，但这个数据确实有意义）</h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="chart-container h-64">
                                            <canvas id="aiInteractionTopicsChart"></canvas>
                                        </div>
                                        <div class="space-y-4">
                                            <div class="bg-white dark:bg-gray-800 p-3 rounded-lg">
                                                <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">热门问题分析</h5>
                                                <ul class="space-y-1 text-xs text-gray-600 dark:text-gray-400">
                                                    <li>1. 电路连接问题 (35%) - 主要集中在特征频率测量电路的连接</li>
                                                    <li>2. 测量方法咨询 (28%) - 关于正确测量BJT特征频率的步骤</li>
                                                    <li>3. 数据分析与计算 (22%) - 特征频率计算和误差分析方法</li>
                                                    <li>4. 理论概念解释 (15%) - 高频模型和频率响应原理</li>
                                                </ul>
                                            </div>
                                            
                                            <div class="bg-white dark:bg-gray-800 p-3 rounded-lg">
                                                <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">教学改进方向</h5>
                                                <ul class="space-y-1 text-xs text-gray-600 dark:text-gray-400">
                                                    <li>• 完善实验指导书中的电路连接说明，增加图解步骤</li>
                                                    <li>• 增强对高频模型的理论讲解，加强与实验的联系</li>
                                                    <li>• 优化AI助手的回答模板，针对热门问题提供更详细的解答</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 实验管理 -->
                <div x-show="teacherTab === 'experiments'" class="mt-6 space-y-6 fade-in">

                    <!-- 实验进度总览 -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-medium text-gray-900 dark:text-white">实验进度总览</h3>
                            <div class="flex space-x-2">
                                <button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm rounded-md font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                    <i class="fas fa-file-export mr-1"></i> 导出数据
                                </button>
                            </div>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                <thead class="bg-gray-50 dark:bg-gray-800">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            实验名称
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            状态
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            完成时间
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            完成率
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            平均分数
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            关键能力
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            操作
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10 flex items-center justify-center bg-blue-100 dark:bg-blue-900 rounded-full">
                                                    <i class="fas fa-microchip text-blue-600 dark:text-blue-400"></i>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900 dark:text-white">直流电机时域模型</div>
                                                    <div class="text-sm text-gray-500 dark:text-gray-400">实验1</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">
                                                已完成
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            2025-03-17
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <span class="text-sm text-gray-900 dark:text-white mr-2">100%</span>
                                                <div class="w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-1.5">
                                                    <div class="bg-green-500 h-1.5 rounded-full" style="width: 100%"></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            86.4
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 mr-1">
                                                静态特性
                                            </span>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200">
                                                参数提取
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <a href="#" class="text-primary-600 dark:text-primary-400 hover:underline">查看详情</a>
                                        </td>
                                    </tr>
                                    
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10 flex items-center justify-center bg-purple-100 dark:bg-purple-900 rounded-full">
                                                    <i class="fas fa-project-diagram text-purple-600 dark:text-purple-400"></i>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900 dark:text-white">线性系统稳定性分析</div>
                                                    <div class="text-sm text-gray-500 dark:text-gray-400">实验2</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">
                                                已完成
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            2025-04-14
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <span class="text-sm text-gray-900 dark:text-white mr-2">100%</span>
                                                <div class="w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-1.5">
                                                    <div class="bg-green-500 h-1.5 rounded-full" style="width: 100%"></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            85.1
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 mr-1">
                                                放大器设计
                                            </span>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200">
                                                频率响应
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <a href="#" class="text-primary-600 dark:text-primary-400 hover:underline">查看详情</a>
                                        </td>
                                    </tr>
                                    
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10 flex items-center justify-center bg-indigo-100 dark:bg-indigo-900 rounded-full">
                                                    <i class="fas fa-sliders-h text-indigo-600 dark:text-indigo-400"></i>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900 dark:text-white">奈奎斯特稳定性分析</div>
                                                    <div class="text-sm text-gray-500 dark:text-gray-400">实验3</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">
                                                已完成
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            2025-04-28
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <span class="text-sm text-gray-900 dark:text-white mr-2">87.1%</span>
                                                <div class="w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-1.5">
                                                    <div class="bg-green-500 h-1.5 rounded-full" style="width: 87.1%"></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            81.8
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 mr-1">
                                                运算放大器
                                            </span>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200">
                                                电路设计
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <a href="#" class="text-primary-600 dark:text-primary-400 hover:underline">查看详情</a>
                                        </td>
                                    </tr>
                                    
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10 flex items-center justify-center bg-green-100 dark:bg-green-900 rounded-full">
                                                    <i class="fas fa-wave-square text-green-600 dark:text-green-400"></i>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900 dark:text-white">超前校正补偿器的设计</div>
                                                    <div class="text-sm text-gray-500 dark:text-gray-400">实验4</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">
                                                已完成
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            2025-05-12
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <span class="text-sm text-gray-900 dark:text-white mr-2">93.5%</span>
                                                <div class="w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-1.5">
                                                    <div class="bg-green-500 h-1.5 rounded-full" style="width: 93.5%"></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            83.6
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 mr-1">
                                                频率特性
                                            </span>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200">
                                                测量方法
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <a href="#" class="text-primary-600 dark:text-primary-400 hover:underline">查看详情</a>
                                        </td>
                                    </tr>
                                    
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10 flex items-center justify-center bg-yellow-100 dark:bg-yellow-900 rounded-full">
                                                    <i class="fas fa-filter text-yellow-600 dark:text-yellow-400"></i>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900 dark:text-white">倒立摆系统的最优控制</div>
                                                    <div class="text-sm text-gray-500 dark:text-gray-400">实验5</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200">
                                                进行中
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            --
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <span class="text-sm text-gray-900 dark:text-white mr-2">51.6%</span>
                                                <div class="w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-1.5">
                                                    <div class="bg-yellow-500 h-1.5 rounded-full" style="width: 51.6%"></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            --
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200 mr-1">
                                                滤波电路
                                            </span>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">
                                                频率响应
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <a href="#" class="text-gray-500 dark:text-primary-400 hover:underline">查看详情</a>
                                        </td>
                                    </tr>
                                    
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10 flex items-center justify-center bg-red-100 dark:bg-red-900 rounded-full">
                                                    <i class="fas fa-plug text-red-600 dark:text-red-400"></i>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900 dark:text-white">离散系统的数字校正</div>
                                                    <div class="text-sm text-gray-500 dark:text-gray-400">实验6</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300">
                                                未开始
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            --
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <span class="text-sm text-gray-900 dark:text-white mr-2">0%</span>
                                                <div class="w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-1.5">
                                                    <div class="bg-gray-400 h-1.5 rounded-full" style="width: 0%"></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            --
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 mr-1">
                                                稳压电路
                                            </span>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200">
                                                纹波分析
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <a href="#" class="text-gray-500 dark:text-primary-400 hover:underline">查看详情</a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- 实验详情分析 - 超前校正补偿器的设计 -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-medium text-gray-900 dark:text-white">实验详情</h3>
                            <div class="relative">
                                <select class="appearance-none bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg pl-3 pr-8 py-2 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary-500">
                                    <option>超前校正补偿器的设计</option>
                                    <option>直流电机时域模型</option>
                                    <option>线性系统稳定性分析</option>
                                    <option>奈奎斯特稳定性分析</option>
                                    <option>倒立摆系统的最优控制</option>
                                    <option>离散系统的数字校正</option>
                                </select>
                                <i class="fas fa-chevron-down absolute right-3 top-3 text-gray-400 pointer-events-none"></i>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <!-- 实验概览 -->
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 dark:text-gray-200 mb-4">实验概览</h4>
                                <div class="space-y-4">
                                    <div class="bg-white dark:bg-gray-800 p-3 rounded-lg flex items-center justify-between">
                                        <div class="flex items-center">
                                            <div class="h-10 w-10 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center">
                                                <i class="fas fa-users text-green-600 dark:text-green-400"></i>
                                            </div>
                                            <div class="ml-3">
                                                <div class="text-xs text-gray-500 dark:text-gray-400">完成人数</div>
                                                <div class="text-sm font-medium text-gray-700 dark:text-gray-300">58/62</div>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="text-sm font-medium text-green-600 dark:text-green-400">93.5%</div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-white dark:bg-gray-800 p-3 rounded-lg flex items-center justify-between">
                                        <div class="flex items-center">
                                            <div class="h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center">
                                                <i class="fas fa-chart-line text-blue-600 dark:text-blue-400"></i>
                                            </div>
                                            <div class="ml-3">
                                                <div class="text-xs text-gray-500 dark:text-gray-400">平均得分</div>
                                                <div class="text-sm font-medium text-gray-700 dark:text-gray-300">83.6/100</div>
                                            </div>
                                        </div>
                                        <div>
                                            <i class="fas fa-arrow-up text-green-500"></i>
                                            <span class="text-xs text-green-500">2.4%</span>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-white dark:bg-gray-800 p-3 rounded-lg flex items-center justify-between">
                                        <div class="flex items-center">
                                            <div class="h-10 w-10 rounded-full bg-yellow-100 dark:bg-yellow-900 flex items-center justify-center">
                                                <i class="fas fa-clock text-yellow-600 dark:text-yellow-400"></i>
                                            </div>
                                            <div class="ml-3">
                                                <div class="text-xs text-gray-500 dark:text-gray-400">平均用时</div>
                                                <div class="text-sm font-medium text-gray-700 dark:text-gray-300">58分钟</div>
                                            </div>
                                        </div>
                                        <div>
                                            <i class="fas fa-arrow-down text-green-500"></i>
                                            <span class="text-xs text-green-500">5分钟</span>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-white dark:bg-gray-800 p-3 rounded-lg flex items-center justify-between">
                                        <div class="flex items-center">
                                            <div class="h-10 w-10 rounded-full bg-red-100 dark:bg-red-900 flex items-center justify-center">
                                                <i class="fas fa-exclamation-circle text-red-600 dark:text-red-400"></i>
                                            </div>
                                            <div class="ml-3">
                                                <div class="text-xs text-gray-500 dark:text-gray-400">平均错误率</div>
                                                <div class="text-sm font-medium text-gray-700 dark:text-gray-300">24.5%</div>
                                            </div>
                                        </div>
                                        <div>
                                            <i class="fas fa-arrow-down text-green-500"></i>
                                            <span class="text-xs text-green-500">3.1%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 成绩分布 -->
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 dark:text-gray-200 mb-4">成绩分布</h4>
                                <div class="chart-container h-64">
                                    <canvas id="experimentGradeDistributionChart"></canvas>
                                </div>
                            </div>
                            
                            <!-- 能力评价 -->
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 dark:text-gray-200 mb-4">能力评价</h4>
                                <div class="space-y-4">
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">频率特性理解</span>
                                            <span class="text-sm text-green-600 dark:text-green-400">85%</span>
                                        </div>
                                        <div class="w-full bg-white dark:bg-gray-600 rounded-full h-2.5">
                                            <div class="bg-green-500 h-2.5 rounded-full" style="width: 85%"></div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">测量原理掌握</span>
                                            <span class="text-sm text-green-600 dark:text-green-400">80%</span>
                                        </div>
                                        <div class="w-full bg-white dark:bg-gray-600 rounded-full h-2.5">
                                            <div class="bg-green-500 h-2.5 rounded-full" style="width: 80%"></div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">电路连接操作</span>
                                            <span class="text-sm text-yellow-600 dark:text-yellow-400">72%</span>
                                        </div>
                                        <div class="w-full bg-white dark:bg-gray-600 rounded-full h-2.5">
                                            <div class="bg-yellow-500 h-2.5 rounded-full" style="width: 72%"></div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">特征频率计算</span>
                                            <span class="text-sm text-yellow-600 dark:text-yellow-400">75%</span>
                                        </div>
                                        <div class="w-full bg-white dark:bg-gray-600 rounded-full h-2.5">
                                            <div class="bg-yellow-500 h-2.5 rounded-full" style="width: 75%"></div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">静态工作点</span>
                                            <span class="text-sm text-blue-600 dark:text-blue-400">79%</span>
                                        </div>
                                        <div class="w-full bg-white dark:bg-gray-600 rounded-full h-2.5">
                                            <div class="bg-blue-500 h-2.5 rounded-full" style="width: 79%"></div>
                                        </div>
                                    </div>

                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">测量电路理解</span>
                                            <span class="text-sm text-blue-600 dark:text-blue-400">79%</span>
                                        </div>
                                        <div class="w-full bg-white dark:bg-gray-600 rounded-full h-2.5">
                                            <div class="bg-blue-500 h-2.5 rounded-full" style="width: 79%"></div>
                                        </div>
                                    </div>

                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">特征频率测量</span>
                                            <span class="text-sm text-blue-600 dark:text-blue-400">79%</span>
                                        </div>
                                        <div class="w-full bg-white dark:bg-gray-600 rounded-full h-2.5">
                                            <div class="bg-blue-500 h-2.5 rounded-full" style="width: 79%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        

                    </div>
                    
                    <!-- 实验比较分析 -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">实验比较分析</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- 实验难度对比 -->
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 dark:text-gray-200 mb-3">实验难度对比</h4>
                                <div class="chart-container h-64">
                                    <canvas id="experimentDifficultyComparisonChart"></canvas>
                                </div>
                                <p class="mt-2 text-xs text-gray-500 dark:text-gray-400 text-center">
                                    难度评估基于平均用时、错误率和AI求助频率等指标，通过AI分析，仅供参考
                                </p>
                            </div>
                            
                            <!-- 实验成绩对比 -->
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 dark:text-gray-200 mb-3">实验成绩对比</h4>
                                <div class="chart-container h-64">
                                    <canvas id="experimentCompletionRateChart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>

                <!-- 学生管理 -->
                <div x-show="teacherTab === 'students'" class="mt-6 space-y-6 fade-in">
                    <!-- 学生总览 -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-medium text-gray-900 dark:text-white">学生总览</h3>
                            <div class="flex space-x-2">
                                <div class="relative">
                                    <input type="text" placeholder="搜索学生..." 
                                           class="pl-9 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100">
                                    <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                                </div>
                                <select class="py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 appearance-none pr-8">
                                    <option>所有成绩级别</option>
                                    <option>优秀 (90-100)</option>
                                    <option>良好 (80-89)</option>
                                    <option>中等 (70-79)</option>
                                    <option>及格 (60-69)</option>
                                    <option>不及格 (<60)</option>
                                </select>
                                <button class="flex items-center px-3 py-2 bg-primary-500 text-white rounded-md text-sm hover:bg-primary-600 transition-colors">
                                    <i class="fas fa-download mr-1"></i> 导出
                                </button>
                            </div>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                <thead class="bg-gray-50 dark:bg-gray-800">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            学生信息
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            课程进度
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            实验完成情况
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            平均分
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            优势实验
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            待提升实验
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            操作
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center">
                                                    <span class="font-medium text-blue-600 dark:text-blue-400">张三</span>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900 dark:text-white">张三</div>
                                                    <div class="text-sm text-gray-500 dark:text-gray-400">2023001</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm text-gray-900 dark:text-white">67%</div>
                                            <div class="w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-1.5">
                                                <div class="bg-green-500 h-1.5 rounded-full" style="width: 67%"></div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm text-gray-900 dark:text-white">4 / 6</div>
                                            <div class="text-xs text-gray-500 dark:text-gray-400">已完成4个实验</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">
                                                91.5
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            超前校正补偿器的设计
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            奈奎斯特稳定性分析
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <a href="#" class="text-primary-600 dark:text-primary-400 hover:underline">查看详情</a>
                                        </td>
                                    </tr>
                                    
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center">
                                                    <span class="font-medium text-green-600 dark:text-green-400">李四</span>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900 dark:text-white">李四</div>
                                                    <div class="text-sm text-gray-500 dark:text-gray-400">2023002</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm text-gray-900 dark:text-white">72%</div>
                                            <div class="w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-1.5">
                                                <div class="bg-green-500 h-1.5 rounded-full" style="width: 72%"></div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm text-gray-900 dark:text-white">4 / 6</div>
                                            <div class="text-xs text-gray-500 dark:text-gray-400">已完成4个实验</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">
                                                93.2
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            直流电机时域模型
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            倒立摆系统的最优控制
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <a href="#" class="text-primary-600 dark:text-primary-400 hover:underline">查看详情</a>
                                        </td>
                                    </tr>
                                    
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10 rounded-full bg-purple-100 dark:bg-purple-900 flex items-center justify-center">
                                                    <span class="font-medium text-purple-600 dark:text-purple-400">王五</span>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900 dark:text-white">王五</div>
                                                    <div class="text-sm text-gray-500 dark:text-gray-400">2023003</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm text-gray-900 dark:text-white">58%</div>
                                            <div class="w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-1.5">
                                                <div class="bg-yellow-500 h-1.5 rounded-full" style="width: 58%"></div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm text-gray-900 dark:text-white">3 / 6</div>
                                            <div class="text-xs text-gray-500 dark:text-gray-400">已完成3个实验</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">
                                                87.5
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            超前校正补偿器的设计
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            奈奎斯特稳定性分析
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <a href="#" class="text-primary-600 dark:text-primary-400 hover:underline">查看详情</a>
                                        </td>
                                    </tr>
                                    
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10 rounded-full bg-yellow-100 dark:bg-yellow-900 flex items-center justify-center">
                                                    <span class="font-medium text-yellow-600 dark:text-yellow-400">赵六</span>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900 dark:text-white">赵六</div>
                                                    <div class="text-sm text-gray-500 dark:text-gray-400">2023004</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm text-gray-900 dark:text-white">48%</div>
                                            <div class="w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-1.5">
                                                <div class="bg-red-500 h-1.5 rounded-full" style="width: 48%"></div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm text-gray-900 dark:text-white">3 / 6</div>
                                            <div class="text-xs text-gray-500 dark:text-gray-400">已完成3个实验</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200">
                                                75.6
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            直流电机时域模型
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            离散系统的数字校正
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <a href="#" class="text-primary-600 dark:text-primary-400 hover:underline">查看详情</a>
                                        </td>
                                    </tr>
                                    
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10 rounded-full bg-red-100 dark:bg-red-900 flex items-center justify-center">
                                                    <span class="font-medium text-red-600 dark:text-red-400">孙七</span>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900 dark:text-white">孙七</div>
                                                    <div class="text-sm text-gray-500 dark:text-gray-400">2023005</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm text-gray-900 dark:text-white">35%</div>
                                            <div class="w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-1.5">
                                                <div class="bg-red-500 h-1.5 rounded-full" style="width: 35%"></div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm text-gray-900 dark:text-white">2 / 6</div>
                                            <div class="text-xs text-gray-500 dark:text-gray-400">已完成2个实验</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200">
                                                65.3
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            --
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            倒立摆系统的最优控制
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <a href="#" class="text-primary-600 dark:text-primary-400 hover:underline">查看详情</a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="flex justify-between items-center p-4 border-t border-gray-200 dark:border-gray-700">
                                <div class="text-sm text-gray-500 dark:text-gray-400">
                                    显示 1-5 条，共 62 条
                                </div>
                                <div class="flex space-x-1">
                                    <button class="px-3 py-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-sm text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-600">
                                        上一页
                                    </button>
                                    <button class="px-3 py-1 bg-primary-50 dark:bg-primary-900 border border-primary-300 dark:border-primary-700 rounded-md text-sm text-primary-600 dark:text-primary-400">
                                        1
                                    </button>
                                    <button class="px-3 py-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-sm text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-600">
                                        2
                                    </button>
                                    <button class="px-3 py-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-sm text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-600">
                                        3
                                    </button>
                                    <button class="px-3 py-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-sm text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-600">
                                        下一页
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 学生学习行为分析 -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-medium text-gray-900 dark:text-white">学习行为分析</h3>
                            <div class="flex space-x-2">
                                <div class="relative">
                                    <select 
                                        x-model="selectedExperiment"
                                        @change="updateAllBehaviorCharts()"
                                        class="appearance-none bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg pl-3 pr-8 py-2 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary-500">
                                        <option value="超前校正补偿器的设计">超前校正补偿器的设计</option>
                                        <option value="直流电机时域模型">直流电机时域模型</option>
                                        <option value="线性系统稳定性分析">线性系统稳定性分析</option>
                                        <option value="奈奎斯特稳定性分析">奈奎斯特稳定性分析</option>
                                        <option value="倒立摆系统的最优控制">倒立摆系统的最优控制</option>
                                        <option value="离散系统的数字校正">离散系统的数字校正</option>
                                    </select>
                                    <i class="fas fa-chevron-down absolute right-3 top-3 text-gray-400 pointer-events-none"></i>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 基础行为分布图表 -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                            <!-- 课前预习时间分布 -->
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h4 class="text-md font-medium text-gray-800 dark:text-gray-200 mb-4">
                                    课前预习时间分布
                                    <span class="text-xs text-gray-500 dark:text-gray-400">(<span x-text="selectedExperiment"></span>)</span>
                                </h4>
                                <div class="chart-container h-64">
                                    <canvas id="preStudyTimeDistributionChart"></canvas>
                                </div>
                            </div>
                            
                            <!-- AI辅助使用次数分布 -->
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h4 class="text-md font-medium text-gray-800 dark:text-gray-200 mb-4">
                                    AI辅助使用次数分布
                                    <span class="text-xs text-gray-500 dark:text-gray-400">(<span x-text="selectedExperiment"></span>)</span>
                                </h4>
                                <div class="chart-container h-64">
                                    <canvas id="aiUsageDistributionChart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 行为与成绩关联分析 -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- 课前预习时间与成绩关系 -->
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">
                                    课前预习时间与成绩关系
                                    <span class="text-xs text-gray-500 dark:text-gray-400">(<span x-text="selectedExperiment"></span>)</span>
                                </h5>
                                <div class="chart-container h-64">
                                    <canvas id="preStudyTimeVsScoreChart"></canvas>
                                </div>
                            </div>
                            
                            <!-- AI辅助使用次数与成绩关系 -->
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">
                                    AI辅助使用与成绩关系
                                    <span class="text-xs text-gray-500 dark:text-gray-400">(<span x-text="selectedExperiment"></span>)</span>
                                </h5>
                                <div class="chart-container h-64">
                                    <canvas id="aiUsageVsScoreChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>

                <!-- 课程目标分析 -->
                <div x-show="teacherTab === 'abilities'" class="mt-6 space-y-6 fade-in">
                    
                    <!-- 1. 课程目标班级平均达成度 -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 hover-card">
                        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">课程目标班级平均达成度</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="chart-container">
                                <canvas id="courseObjectiveAchievementChart"></canvas>
                            </div>
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h4 class="text-md font-medium text-gray-800 dark:text-gray-200 mb-3">达成度分析</h4>
                                <div class="space-y-4">
                                    <div class="flex justify-between items-center p-3 bg-white dark:bg-gray-800 rounded-lg">
                                        <div class="flex items-center">
                                            <div class="w-3 h-3 bg-blue-500 rounded-full mr-3"></div>
                                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">课程目标1</span>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-lg font-bold text-gray-900 dark:text-white">85.2%</div>
                                            <div class="text-xs text-green-600 dark:text-green-400">达成良好</div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex justify-between items-center p-3 bg-white dark:bg-gray-800 rounded-lg">
                                        <div class="flex items-center">
                                            <div class="w-3 h-3 bg-green-500 rounded-full mr-3"></div>
                                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">课程目标2</span>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-lg font-bold text-gray-900 dark:text-white">80.6%</div>
                                            <div class="text-xs text-green-600 dark:text-green-400">达成良好</div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex justify-between items-center p-3 bg-white dark:bg-gray-800 rounded-lg">
                                        <div class="flex items-center">
                                            <div class="w-3 h-3 bg-yellow-500 rounded-full mr-3"></div>
                                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">课程目标3</span>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-lg font-bold text-gray-900 dark:text-white">75.3%</div>
                                            <div class="text-xs text-yellow-600 dark:text-yellow-400">基本达成</div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex justify-between items-center p-3 bg-white dark:bg-gray-800 rounded-lg">
                                        <div class="flex items-center">
                                            <div class="w-3 h-3 bg-red-500 rounded-full mr-3"></div>
                                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">课程目标4</span>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-lg font-bold text-gray-900 dark:text-white">68.2%</div>
                                            <div class="text-xs text-red-600 dark:text-red-400">待提升</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 2. 课程目标与能力标签支撑关系 - 一行显示所有实验 -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 hover-card">
                        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">课程目标与能力标签支撑关系</h3>
                        <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-lg">
                            
                            <!-- 控制面板 -->
                            <div class="flex justify-between items-center mb-6">
                                <div class="flex space-x-2">
                                    <button @click="selectedObjective = null" 
                                            class="px-3 py-1.5 text-sm rounded-md transition-colors"
                                            :class="selectedObjective === null ? 'bg-blue-500 text-white' : 'bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500'">
                                        显示全部
                                    </button>
                                    <button @click="selectedObjective = 1" 
                                            class="px-3 py-1.5 text-sm rounded-md transition-colors"
                                            :class="selectedObjective === 1 ? 'bg-blue-500 text-white' : 'bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500'">
                                        课程目标1
                                    </button>
                                    <button @click="selectedObjective = 2" 
                                            class="px-3 py-1.5 text-sm rounded-md transition-colors"
                                            :class="selectedObjective === 2 ? 'bg-green-500 text-white' : 'bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500'">
                                        课程目标2
                                    </button>
                                    <button @click="selectedObjective = 3" 
                                            class="px-3 py-1.5 text-sm rounded-md transition-colors"
                                            :class="selectedObjective === 3 ? 'bg-yellow-500 text-white' : 'bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500'">
                                        课程目标3
                                    </button>
                                    <button @click="selectedObjective = 4" 
                                            class="px-3 py-1.5 text-sm rounded-md transition-colors"
                                            :class="selectedObjective === 4 ? 'bg-red-500 text-white' : 'bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500'">
                                        课程目标4
                                    </button>
                                </div>
                                <div class="text-xs text-gray-500 dark:text-gray-400">
                                    点击课程目标按钮查看单独支撑关系，颜色表示能力标签支撑的课程目标
                                </div>
                            </div>
                            
                            <!-- 支撑关系展示区域 -->
                            <div class="grid grid-cols-7 gap-3">
                                <!-- 课程目标列 -->
                                <div class="space-y-3">
                                    <h4 class="text-sm font-medium text-gray-800 dark:text-gray-200 text-center mb-3">课程目标</h4>
                                    
                                    <div class="objective-card bg-blue-100 dark:bg-blue-900 p-3 rounded-lg cursor-pointer transition-all"
                                         :class="selectedObjective === 1 ? 'ring-2 ring-blue-500 transform scale-105' : ''"
                                         @click="selectedObjective = selectedObjective === 1 ? null : 1">
                                        <div class="flex items-center justify-between mb-1">
                                            <h5 class="font-medium text-blue-800 dark:text-blue-200 text-sm">目标1</h5>
                                            <div class="text-sm font-bold text-blue-600 dark:text-blue-400">85.2%</div>
                                        </div>
                                        <p class="text-xs text-blue-700 dark:text-blue-300">掌握基本理论和分析方法</p>
                                    </div>
                                    
                                    <div class="objective-card bg-green-100 dark:bg-green-900 p-3 rounded-lg cursor-pointer transition-all"
                                         :class="selectedObjective === 2 ? 'ring-2 ring-green-500 transform scale-105' : ''"
                                         @click="selectedObjective = selectedObjective === 2 ? null : 2">
                                        <div class="flex items-center justify-between mb-1">
                                            <h5 class="font-medium text-green-800 dark:text-green-200 text-sm">目标2</h5>
                                            <div class="text-sm font-bold text-green-600 dark:text-green-400">80.6%</div>
                                        </div>
                                        <p class="text-xs text-green-700 dark:text-green-300">具备设计和仿真能力</p>
                                    </div>
                                    
                                    <div class="objective-card bg-yellow-100 dark:bg-yellow-900 p-3 rounded-lg cursor-pointer transition-all"
                                         :class="selectedObjective === 3 ? 'ring-2 ring-yellow-500 transform scale-105' : ''"
                                         @click="selectedObjective = selectedObjective === 3 ? null : 3">
                                        <div class="flex items-center justify-between mb-1">
                                            <h5 class="font-medium text-yellow-800 dark:text-yellow-200 text-sm">目标3</h5>
                                            <div class="text-sm font-bold text-yellow-600 dark:text-yellow-400">75.3%</div>
                                        </div>
                                        <p class="text-xs text-yellow-700 dark:text-yellow-300">培养操作和测量技能</p>
                                    </div>
                                    
                                    <div class="objective-card bg-red-100 dark:bg-red-900 p-3 rounded-lg cursor-pointer transition-all"
                                         :class="selectedObjective === 4 ? 'ring-2 ring-red-500 transform scale-105' : ''"
                                         @click="selectedObjective = selectedObjective === 4 ? null : 4">
                                        <div class="flex items-center justify-between mb-1">
                                            <h5 class="font-medium text-red-800 dark:text-red-200 text-sm">目标4</h5>
                                            <div class="text-sm font-bold text-red-600 dark:text-red-400">68.2%</div>
                                        </div>
                                        <p class="text-xs text-red-700 dark:text-red-300">具备综合应用能力</p>
                                    </div>
                                </div>
                                
                                <!-- 实验和能力标签区域 - 6个实验一行显示 -->
                                <div class="col-span-6">
                                    <div class="grid grid-cols-6 gap-1">
                                        
                                        <!-- 实验1：晶体管特性测试 -->
                                        <div class="space-y-1">
                                            <div class="experiment-title dark:bg-gray-600 dark:border-gray-500 dark:text-gray-200">
                                                实验1：晶体管特性测试
                                            </div>
                                            <div class="space-y-1">
                                                <!-- 支撑课程目标1的能力标签 -->
                                                <div class="ability-tag-compact tag-objective-1"
                                                     :class="selectedObjective !== null && selectedObjective !== 1 ? 'opacity-30' : ''"
                                                     title="支撑课程目标1">
                                                    <div class="font-medium">晶体管理论分析</div>
                                                    <div class="font-bold">90%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-1"
                                                     :class="selectedObjective !== null && selectedObjective !== 1 ? 'opacity-30' : ''"
                                                     title="支撑课程目标1">
                                                    <div class="font-medium">静态工作点计算</div>
                                                    <div class="font-bold">88%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-1"
                                                     :class="selectedObjective !== null && selectedObjective !== 1 ? 'opacity-30' : ''"
                                                     title="支撑课程目标1">
                                                    <div class="font-medium">特性曲线绘制</div>
                                                    <div class="font-bold">85%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-1"
                                                     :class="selectedObjective !== null && selectedObjective !== 1 ? 'opacity-30' : ''"
                                                     title="支撑课程目标1">
                                                    <div class="font-medium">参数提取分析</div>
                                                    <div class="font-bold">82%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-3"
                                                     :class="selectedObjective !== null && selectedObjective !== 3 ? 'opacity-30' : ''"
                                                     title="支撑课程目标3">
                                                    <div class="font-medium">测试电路搭建</div>
                                                    <div class="font-bold">79%</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- 实验2：放大器设计 -->
                                        <div class="space-y-1">
                                            <div class="experiment-title dark:bg-gray-600 dark:border-gray-500 dark:text-gray-200">
                                                实验2：放大器设计
                                            </div>
                                            <div class="space-y-1">
                                                <div class="ability-tag-compact tag-objective-2"
                                                     :class="selectedObjective !== null && selectedObjective !== 2 ? 'opacity-30' : ''"
                                                     title="支撑课程目标2">
                                                    <div class="font-medium">放大器设计理论</div>
                                                    <div class="font-bold">86%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-2"
                                                     :class="selectedObjective !== null && selectedObjective !== 2 ? 'opacity-30' : ''"
                                                     title="支撑课程目标2">
                                                    <div class="font-medium">偏置电路设计</div>
                                                    <div class="font-bold">83%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-2"
                                                     :class="selectedObjective !== null && selectedObjective !== 2 ? 'opacity-30' : ''"
                                                     title="支撑课程目标2">
                                                    <div class="font-medium">增益计算验证</div>
                                                    <div class="font-bold">81%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-1"
                                                     :class="selectedObjective !== null && selectedObjective !== 1 ? 'opacity-30' : ''"
                                                     title="支撑课程目标1">
                                                    <div class="font-medium">负载线分析</div>
                                                    <div class="font-bold">78%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-3"
                                                     :class="selectedObjective !== null && selectedObjective !== 3 ? 'opacity-30' : ''"
                                                     title="支撑课程目标3">
                                                    <div class="font-medium">失真度测量</div>
                                                    <div class="font-bold">76%</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- 实验3：奈奎斯特稳定性分析 -->
                                        <div class="space-y-1">
                                            <div class="experiment-title dark:bg-gray-600 dark:border-gray-500 dark:text-gray-200">
                                                实验3：奈奎斯特稳定性分析
                                            </div>
                                            <div class="space-y-1">
                                                <div class="ability-tag-compact tag-objective-2"
                                                     :class="selectedObjective !== null && selectedObjective !== 2 ? 'opacity-30' : ''"
                                                     title="支撑课程目标2">
                                                    <div class="font-medium">运放电路应用</div>
                                                    <div class="font-bold">84%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-2"
                                                     :class="selectedObjective !== null && selectedObjective !== 2 ? 'opacity-30' : ''"
                                                     title="支撑课程目标2">
                                                    <div class="font-medium">反馈网络设计</div>
                                                    <div class="font-bold">80%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-3"
                                                     :class="selectedObjective !== null && selectedObjective !== 3 ? 'opacity-30' : ''"
                                                     title="支撑课程目标3">
                                                    <div class="font-medium">同相反相配置</div>
                                                    <div class="font-bold">77%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-1"
                                                     :class="selectedObjective !== null && selectedObjective !== 1 ? 'opacity-30' : ''"
                                                     title="支撑课程目标1">
                                                    <div class="font-medium">虚短虚断理解</div>
                                                    <div class="font-bold">73%</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- 实验4：频率响应测试 -->
                                        <div class="space-y-1">
                                            <div class="experiment-title dark:bg-gray-600 dark:border-gray-500 dark:text-gray-200">
                                                实验4：频率响应测试
                                            </div>
                                            <div class="space-y-1">
                                                <div class="ability-tag-compact tag-objective-1"
                                                     :class="selectedObjective !== null && selectedObjective !== 1 ? 'opacity-30' : ''"
                                                     title="支撑课程目标1">
                                                    <div class="font-medium">频率响应测试</div>
                                                    <div class="font-bold">85%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-1"
                                                     :class="selectedObjective !== null && selectedObjective !== 1 ? 'opacity-30' : ''"
                                                     title="支撑课程目标1">
                                                    <div class="font-medium">截止频率测量</div>
                                                    <div class="font-bold">82%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-4"
                                                     :class="selectedObjective !== null && selectedObjective !== 4 ? 'opacity-30' : ''"
                                                     title="支撑课程目标4">
                                                    <div class="font-medium">米勒效应分析</div>
                                                    <div class="font-bold">75%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-3"
                                                     :class="selectedObjective !== null && selectedObjective !== 3 ? 'opacity-30' : ''"
                                                     title="支撑课程目标3">
                                                    <div class="font-medium">扫频测量技术</div>
                                                    <div class="font-bold">71%</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- 实验5：滤波器设计 -->
                                        <div class="space-y-1">
                                            <div class="experiment-title dark:bg-gray-600 dark:border-gray-500 dark:text-gray-200">
                                                实验5：滤波器设计
                                            </div>
                                            <div class="space-y-1">
                                                <div class="ability-tag-compact tag-objective-2"
                                                     :class="selectedObjective !== null && selectedObjective !== 2 ? 'opacity-30' : ''"
                                                     title="支撑课程目标2">
                                                    <div class="font-medium">滤波器设计</div>
                                                    <div class="font-bold">78%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-2"
                                                     :class="selectedObjective !== null && selectedObjective !== 2 ? 'opacity-30' : ''"
                                                     title="支撑课程目标2">
                                                    <div class="font-medium">传递函数推导</div>
                                                    <div class="font-bold">76%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-4"
                                                     :class="selectedObjective !== null && selectedObjective !== 4 ? 'opacity-30' : ''"
                                                     title="支撑课程目标4">
                                                    <div class="font-medium">Bode图绘制</div>
                                                    <div class="font-bold">72%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-3"
                                                     :class="selectedObjective !== null && selectedObjective !== 3 ? 'opacity-30' : ''"
                                                     title="支撑课程目标3">
                                                    <div class="font-medium">幅频特性测量</div>
                                                    <div class="font-bold">74%</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- 实验6：电源设计 -->
                                        <div class="space-y-1">
                                            <div class="experiment-title dark:bg-gray-600 dark:border-gray-500 dark:text-gray-200">
                                                实验6：电源设计
                                            </div>
                                            <div class="space-y-1">
                                                <div class="ability-tag-compact tag-objective-4"
                                                     :class="selectedObjective !== null && selectedObjective !== 4 ? 'opacity-30' : ''"
                                                     title="支撑课程目标4">
                                                    <div class="font-medium">整流电路设计</div>
                                                    <div class="font-bold">70%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-4"
                                                     :class="selectedObjective !== null && selectedObjective !== 4 ? 'opacity-30' : ''"
                                                     title="支撑课程目标4">
                                                    <div class="font-medium">滤波电路优化</div>
                                                    <div class="font-bold">68%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-4"
                                                     :class="selectedObjective !== null && selectedObjective !== 4 ? 'opacity-30' : ''"
                                                     title="支撑课程目标4">
                                                    <div class="font-medium">稳压电路调试</div>
                                                    <div class="font-bold">65%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-4"
                                                     :class="selectedObjective !== null && selectedObjective !== 4 ? 'opacity-30' : ''"
                                                     title="支撑课程目标4">
                                                    <div class="font-medium">纹波系数计算</div>
                                                    <div class="font-bold">62%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-4"
                                                     :class="selectedObjective !== null && selectedObjective !== 4 ? 'opacity-30' : ''"
                                                     title="支撑课程目标4">
                                                    <div class="font-medium">保护电路设计</div>
                                                    <div class="font-bold">59%</div>
                                                </div>
                                                <div class="ability-tag-compact tag-objective-4"
                                                     :class="selectedObjective !== null && selectedObjective !== 4 ? 'opacity-30' : ''"
                                                     title="支撑课程目标4">
                                                    <div class="font-medium">负载调整率测试</div>
                                                    <div class="font-bold">56%</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <!-- 图例 -->
                            <div class="mt-6 flex flex-wrap gap-4 text-xs text-gray-600 dark:text-gray-400">
                                <div class="flex items-center">
                                    <div class="w-4 h-2 bg-blue-500 rounded mr-2"></div>
                                    <span>课程目标1（基本理论）</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-4 h-2 bg-green-500 rounded mr-2"></div>
                                    <span>课程目标2（设计仿真）</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-4 h-2 bg-yellow-500 rounded mr-2"></div>
                                    <span>课程目标3（操作测量）</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-4 h-2 bg-red-500 rounded mr-2"></div>
                                    <span>课程目标4（综合应用）</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 4. 课程目标详情分析 -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">课程目标详情分析</h3>
                        
                        <div class="space-y-8">
                            <!-- 课程目标1详情 -->
                            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-6">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h4 class="text-lg font-medium text-blue-800 dark:text-blue-200">课程目标1</h4>
                                        <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">掌握模拟电子电路的基本理论和分析方法</p>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-2xl font-bold text-blue-600 dark:text-blue-400">85.2%</div>
                                        <div class="text-sm text-green-600 dark:text-green-400">达成良好</div>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <h5 class="font-medium text-gray-700 dark:text-gray-300 mb-3">学生达成度分布</h5>
                                        <div class="chart-container h-48">
                                            <canvas id="objective1DistributionChart"></canvas>
                                        </div>
                                    </div>
                                    
                                    <div class="space-y-4">
                                        <div>
                                            <h5 class="font-medium text-gray-700 dark:text-gray-300 mb-3">支撑能力达成情况</h5>
                                            <div class="space-y-2">
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">晶体管理论分析</span>
                                                    <span class="text-sm font-medium text-green-600 dark:text-green-400">90%</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">静态工作点计算</span>
                                                    <span class="text-sm font-medium text-green-600 dark:text-green-400">88%</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">特性曲线绘制</span>
                                                    <span class="text-sm font-medium text-green-600 dark:text-green-400">85%</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">频率响应测试</span>
                                                    <span class="text-sm font-medium text-green-600 dark:text-green-400">85%</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">参数提取分析</span>
                                                    <span class="text-sm font-medium text-green-600 dark:text-green-400">82%</span>
                                                </div>
                                            </div>
                                        </div>
                                        

                                    </div>
                                </div>
                            </div>

                            <!-- 课程目标2详情 -->
                            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-6">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h4 class="text-lg font-medium text-green-800 dark:text-green-200">课程目标2</h4>
                                        <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">具备电路设计和仿真的实践能力</p>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-2xl font-bold text-green-600 dark:text-green-400">80.6%</div>
                                        <div class="text-sm text-green-600 dark:text-green-400">达成良好</div>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <h5 class="font-medium text-gray-700 dark:text-gray-300 mb-3">学生达成度分布</h5>
                                        <div class="chart-container h-48">
                                            <canvas id="objective2DistributionChart"></canvas>
                                        </div>
                                    </div>
                                    
                                    <div class="space-y-4">
                                        <div>
                                            <h5 class="font-medium text-gray-700 dark:text-gray-300 mb-3">支撑能力达成情况</h5>
                                            <div class="space-y-2">
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">放大器设计理论</span>
                                                    <span class="text-sm font-medium text-green-600 dark:text-green-400">86%</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">运放电路应用</span>
                                                    <span class="text-sm font-medium text-green-600 dark:text-green-400">84%</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">偏置电路设计</span>
                                                    <span class="text-sm font-medium text-green-600 dark:text-green-400">83%</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">增益计算验证</span>
                                                    <span class="text-sm font-medium text-green-600 dark:text-green-400">81%</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">滤波器设计</span>
                                                    <span class="text-sm font-medium text-yellow-600 dark:text-yellow-400">78%</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>

                            <!-- 课程目标3详情 -->
                            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-6">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h4 class="text-lg font-medium text-yellow-800 dark:text-yellow-200">课程目标3</h4>
                                        <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">培养实验操作和测量分析技能</p>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-2xl font-bold text-yellow-600 dark:text-yellow-400">75.3%</div>
                                        <div class="text-sm text-yellow-600 dark:text-yellow-400">基本达成</div>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <h5 class="font-medium text-gray-700 dark:text-gray-300 mb-3">学生达成度分布</h5>
                                        <div class="chart-container h-48">
                                            <canvas id="objective3DistributionChart"></canvas>
                                        </div>
                                    </div>
                                    
                                    <div class="space-y-4">
                                        <div>
                                            <h5 class="font-medium text-gray-700 dark:text-gray-300 mb-3">支撑能力达成情况</h5>
                                            <div class="space-y-2">
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">面包板搭建</span>
                                                    <span class="text-sm font-medium text-green-600 dark:text-green-400">91%</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">万用表使用</span>
                                                    <span class="text-sm font-medium text-green-600 dark:text-green-400">89%</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">示波器操作</span>
                                                    <span class="text-sm font-medium text-green-600 dark:text-green-400">87%</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">测试电路搭建</span>
                                                    <span class="text-sm font-medium text-yellow-600 dark:text-yellow-400">79%</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">同相反相配置</span>
                                                    <span class="text-sm font-medium text-yellow-600 dark:text-yellow-400">77%</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>

                            <!-- 课程目标4详情 -->
                            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-6">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h4 class="text-lg font-medium text-red-800 dark:text-red-200">课程目标4</h4>
                                        <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">具备理论联系实际的综合应用能力</p>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-2xl font-bold text-red-600 dark:text-red-400">68.2%</div>
                                        <div class="text-sm text-red-600 dark:text-red-400">待提升</div>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <h5 class="font-medium text-gray-700 dark:text-gray-300 mb-3">学生达成度分布</h5>
                                        <div class="chart-container h-48">
                                            <canvas id="objective4DistributionChart"></canvas>
                                        </div>
                                    </div>
                                    
                                    <div class="space-y-4">
                                        <div>
                                            <h5 class="font-medium text-gray-700 dark:text-gray-300 mb-3">支撑能力达成情况</h5>
                                            <div class="space-y-2">
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">米勒效应分析</span>
                                                    <span class="text-sm font-medium text-yellow-600 dark:text-yellow-400">75%</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">Bode图绘制</span>
                                                    <span class="text-sm font-medium text-yellow-600 dark:text-yellow-400">72%</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">整流电路设计</span>
                                                    <span class="text-sm font-medium text-yellow-600 dark:text-yellow-400">70%</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">滤波电路优化</span>
                                                    <span class="text-sm font-medium text-yellow-600 dark:text-yellow-400">68%</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="text-sm text-gray-600 dark:text-gray-400">稳压电路调试</span>
                                                    <span class="text-sm font-medium text-red-600 dark:text-red-400">65%</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 课程目标达成度趋势 -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 hover-card">
                        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">课程目标达成度趋势</h3>
                        <div class="chart-container">
                            <canvas id="goalAchievementTrendChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- 教学报告 -->
                <div x-show="teacherTab === 'reports'" class="mt-6 space-y-6 fade-in">
                    <!-- 整体教学效果报告 -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">整体教学效果报告</h3>
                        
                        <div class="space-y-6">
                            <!-- 课程概况 -->
                            <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
                                <h4 class="text-md font-medium text-blue-800 dark:text-blue-300 mb-2">课程概况</h4>
                                <p class="text-sm text-gray-700 dark:text-gray-300">
                                    模拟电子电路课程在2025春季学期共有62名学生参与，课程整体完成率为68.2%，高于预期进度4.8个百分点。课程平均分为83.6分，较上学期提高了3.2%。学生参与度达到87.3%，显著高于上学期的79.2%，表明本学期的教学改革取得了明显成效。学生的能力达标率为78.5%，较上学期提高了5.2个百分点，但理论应用能力仍是学生的薄弱环节，达标率仅为68.2%。
                                </p>
                            </div>
                            
                            <!-- 教学优势与不足 -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg">
                                    <h4 class="text-md font-medium text-green-800 dark:text-green-300 mb-2">教学优势</h4>
                                    <ul class="space-y-2 text-sm text-gray-700 dark:text-gray-300">
                                        <li class="flex items-start space-x-2">
                                            <i class="fas fa-check-circle text-green-500 mt-1"></i>
                                            <span>
                                                <strong>AI辅助教学效果显著</strong> - 引入AI辅助学习工具极大提高了学生参与度和问题解决能力。学生对AI助手的满意度高达88%，AI辅助的问题解决率达到78%。
                                            </span>
                                        </li>
                                        <li class="flex items-start space-x-2">
                                            <i class="fas fa-check-circle text-green-500 mt-1"></i>
                                            <span>
                                                <strong>实验过程优化成效明显</strong> - 改进后的实验指导书和实验前指导环节使得实验操作能力达标率提升至82.3%，学生实验完成率显著提高。
                                            </span>
                                        </li>
                                        <li class="flex items-start space-x-2">
                                            <i class="fas fa-check-circle text-green-500 mt-1"></i>
                                            <span>
                                                <strong>基础知识传授扎实</strong> - 电路分析能力、参数测量能力等基础能力培养扎实，达标率分别为85.2%和80.6%。
                                            </span>
                                        </li>
                                    </ul>
                                </div>
                                
                                <div class="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg">
                                    <h4 class="text-md font-medium text-yellow-800 dark:text-yellow-300 mb-2">教学不足</h4>
                                    <ul class="space-y-2 text-sm text-gray-700 dark:text-gray-300">
                                        <li class="flex items-start space-x-2">
                                            <i class="fas fa-exclamation-circle text-yellow-500 mt-1"></i>
                                            <span>
                                                <strong>理论与实践结合不足</strong> - 理论应用能力是学生最薄弱的环节，达标率仅为68.2%，表明理论知识与实际应用的结合不够紧密。
                                            </span>
                                        </li>
                                        <li class="flex items-start space-x-2">
                                            <i class="fas fa-exclamation-circle text-yellow-500 mt-1"></i>
                                            <span>
                                                <strong>高频模型理解不深</strong> - 超前校正补偿器的设计实验中，学生对高频等效模型的理解普遍不足，尤其是电容影响机制的理解。
                                            </span>
                                        </li>
                                        <li class="flex items-start space-x-2">
                                            <i class="fas fa-exclamation-circle text-yellow-500 mt-1"></i>
                                            <span>
                                                <strong>实验难度梯度不均</strong> - 实验难度梯度存在不均衡性，特别是从超前校正补偿器的设计到倒立摆系统的最优控制的难度跨度过大。
                                            </span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                                                      
                            <!-- AI辅助教学分析 -->
                            <div class="bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg">
                                <h4 class="text-md font-medium text-purple-800 dark:text-purple-300 mb-2">AI辅助教学分析</h4>
                                <p class="text-sm text-gray-700 dark:text-gray-300 mb-4">
                                    本学期引入AI辅助学习工具是教学改革的重要亮点。学生对AI助手的使用率达85%，问题解决率达78%，总互动次数达3,428次，较上学期增长42.3%。学生与AI互动主要集中在电路连接问题(35%)、测量方法咨询(28%)、数据分析与计算(22%)和理论概念解释(15%)。
                                </p>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="bg-white dark:bg-gray-800 p-3 rounded-lg">
                                        <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">AI辅助优势</h5>
                                        <ul class="space-y-1 text-sm text-gray-600 dark:text-gray-400">
                                            <li>• 提供即时反馈，解决实验中的卡点问题</li>
                                            <li>• 减轻教师辅导压力，提高教学效率</li>
                                            <li>• 个性化指导，适应不同学生需求</li>
                                            <li>• 为教学改进提供详细数据支持</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="bg-white dark:bg-gray-800 p-3 rounded-lg">
                                        <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">AI辅助改进方向</h5>
                                        <ul class="space-y-1 text-sm text-gray-600 dark:text-gray-400">
                                            <li>• 增强对电路连接问题的识别能力</li>
                                            <li>• 加强理论解释深度，促进理论应用能力提升</li>
                                            <li>• 增加图像识别功能，实现电路图自动分析</li>
                                            <li>• 开发个性化学习路径推荐功能</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 教学改进建议 -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">教学改进建议</h3>
                        
                        <div class="space-y-5">
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h4 class="text-md font-medium text-gray-800 dark:text-gray-200 mb-3">课程内容与结构优化</h4>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="bg-white dark:bg-gray-800 p-3 rounded-lg">
                                        <div class="flex items-start space-x-2">
                                            <i class="fas fa-book-open text-blue-500 mt-1"></i>
                                            <div>
                                                <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300">强化理论应用训练</h5>
                                                <p class="text-xs text-gray-600 dark:text-gray-400">
                                                    针对理论应用能力不足的问题，建议在实验前增加15分钟的理论回顾与应用预览环节，帮助学生建立知识链接。
                                                </p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                                                    <span class="font-medium">优先级:</span> 高 | 
                                                    <span class="font-medium">预期效果:</span> 理论应用能力提升15%
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-white dark:bg-gray-800 p-3 rounded-lg">
                                        <div class="flex items-start space-x-2">
                                            <i class="fas fa-chart-line text-green-500 mt-1"></i>
                                            <div>
                                                <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300">优化实验难度梯度</h5>
                                                <p class="text-xs text-gray-600 dark:text-gray-400">
                                                    调整实验顺序和难度分布，在超前校正补偿器的设计和倒立摆系统的最优控制之间增加过渡性内容，降低难度跨度。
                                                </p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                                                    <span class="font-medium">优先级:</span> 中 | 
                                                    <span class="font-medium">预期效果:</span> 减少20%的学习困难情况
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-white dark:bg-gray-800 p-3 rounded-lg">
                                        <div class="flex items-start space-x-2">
                                            <i class="fas fa-chalkboard-teacher text-indigo-500 mt-1"></i>
                                            <div>
                                                <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300">增强高频模型教学</h5>
                                                <p class="text-xs text-gray-600 dark:text-gray-400">
                                                    增加高频等效模型专题讲解，重点解释结电容的影响。开发交互式动画展示频率变化对电容阻抗和电流分配的影响。
                                                </p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                                                    <span class="font-medium">优先级:</span> 高 | 
                                                    <span class="font-medium">预期效果:</span> 高频模型理解度提升25%
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-white dark:bg-gray-800 p-3 rounded-lg">
                                        <div class="flex items-start space-x-2">
                                            <i class="fas fa-user-graduate text-red-500 mt-1"></i>
                                            <div>
                                                <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300">实施分层教学</h5>
                                                <p class="text-xs text-gray-600 dark:text-gray-400">
                                                    实施多层次教学策略，为不同水平的学生提供差异化指导。对学习困难学生加强基础训练，对高水平学生提供拓展内容。
                                                </p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                                                    <span class="font-medium">优先级:</span> 中 | 
                                                    <span class="font-medium">预期效果:</span> 整体成绩分布更均衡
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h4 class="text-md font-medium text-gray-800 dark:text-gray-200 mb-3">教学方法与资源改进</h4>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="bg-white dark:bg-gray-800 p-3 rounded-lg">
                                        <div class="flex items-start space-x-2">
                                            <i class="fas fa-drafting-compass text-purple-500 mt-1"></i>
                                            <div>
                                                <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300">改进实验指导材料</h5>
                                                <p class="text-xs text-gray-600 dark:text-gray-400">
                                                    重新设计实验指导书，增加图解步骤、常见问题与解决方案，以及各环节的理论背景简明解释，特别是电路连接部分。
                                                </p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                                                    <span class="font-medium">实施时间:</span> 2025年暑期 | 
                                                    <span class="font-medium">负责团队:</span> 教学组
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-white dark:bg-gray-800 p-3 rounded-lg">
                                        <div class="flex items-start space-x-2">
                                            <i class="fas fa-robot text-blue-500 mt-1"></i>
                                            <div>
                                                <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300">升级AI辅助功能</h5>
                                                <p class="text-xs text-gray-600 dark:text-gray-400">
                                                    基于本学期数据训练更专业的领域AI助手，增加图像识别、电路诊断等专业能力，并增强对理论应用问题的解释深度。
                                                </p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                                                    <span class="font-medium">实施时间:</span> 2025年秋季学期 | 
                                                    <span class="font-medium">负责团队:</span> 技术支持团队
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-white dark:bg-gray-800 p-3 rounded-lg">
                                        <div class="flex items-start space-x-2">
                                            <i class="fas fa-video text-green-500 mt-1"></i>
                                            <div>
                                                <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300">开发多媒体教学资源</h5>
                                                <p class="text-xs text-gray-600 dark:text-gray-400">
                                                    开发高质量的BJT高频特性可视化教学视频与交互式动画，特别是渡越时间和电容效应的直观展示。
                                                </p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                                                    <span class="font-medium">实施时间:</span> 2025年7-8月 | 
                                                    <span class="font-medium">负责团队:</span> 多媒体开发组
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-white dark:bg-gray-800 p-3 rounded-lg">
                                        <div class="flex items-start space-x-2">
                                            <i class="fas fa-tasks text-yellow-500 mt-1"></i>
                                            <div>
                                                <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300">改进评价机制</h5>
                                                <p class="text-xs text-gray-600 dark:text-gray-400">
                                                    调整评价体系，将理论应用能力在总评中的权重提高，增加理论与实践结合的评价项目，引入多维能力评价指标。
                                                </p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                                                    <span class="font-medium">实施时间:</span> 2025年秋季学期 | 
                                                    <span class="font-medium">负责团队:</span> 教学评价组
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            

                        </div>
                    </div>
                </div>

                <!-- 成绩设置 -->
                <!-- 评价设置 -->
                <div x-show="teacherTab === 'gradeSettings'" class="mt-6 space-y-6 fade-in" 
                    x-data="{
                        weights: {
                            prestudy: 0,
                            operation: 60,
                            assessment: 40
                        },
                        adjustmentOrder: [], // 记录用户调整权重的顺序
                        updateWeight(type, value) {
                            const newValue = parseInt(value);
                            this.weights[type] = newValue;
                            
                            // 记录调整顺序
                            if (!this.adjustmentOrder.includes(type)) {
                                this.adjustmentOrder.push(type);
                            } else {
                                // 如果已存在，移动到末尾
                                const index = this.adjustmentOrder.indexOf(type);
                                this.adjustmentOrder.splice(index, 1);
                                this.adjustmentOrder.push(type);
                            }
                            
                            // 保持最多2个元素
                            if (this.adjustmentOrder.length > 2) {
                                this.adjustmentOrder.shift();
                            }
                            
                            // 自动调整第三个权重
                            const allTypes = ['prestudy', 'operation', 'assessment'];
                            const unchangedType = allTypes.find(t => !this.adjustmentOrder.includes(t));
                            
                            if (unchangedType && this.adjustmentOrder.length >= 2) {
                                const total = this.adjustmentOrder.reduce((sum, t) => sum + this.weights[t], 0);
                                this.weights[unchangedType] = Math.max(0, Math.min(100, 100 - total));
                            }
                        },
                        resetWeights() {
                            this.weights = { prestudy: 0, operation: 60, assessment: 40 };
                            this.adjustmentOrder = [];
                        },
                        saveSettings() {
                            // 这里可以发送到后端保存
                            alert('权重设置已保存！');
                        }
                    }">

                    <!-- 权重设置面板 -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-medium text-gray-900 dark:text-white">成绩计算权重设置</h3>
                            <div class="flex space-x-2">
                                <button @click="resetWeights()" 
                                        class="px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm rounded-md font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                    <i class="fas fa-undo mr-1"></i> 重置默认
                                </button>
                                <button @click="saveSettings()" 
                                        class="px-4 py-2 bg-primary-500 text-white text-sm rounded-md font-medium hover:bg-primary-600 transition-colors">
                                    <i class="fas fa-save mr-1"></i> 保存设置
                                </button>
                            </div>
                        </div>

                        <!-- 权重调节区域 -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <!-- 课前预习权重 -->
                            <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center">
                                        <i class="fas fa-book-reader text-blue-600 dark:text-blue-400 mr-2"></i>
                                        <h4 class="text-md font-medium text-blue-800 dark:text-blue-200">课前预习</h4>
                                    </div>
                                    <div class="text-2xl font-bold text-blue-600 dark:text-blue-400" x-text="weights.prestudy + '%'"></div>
                                </div>
                                <div class="space-y-3">
                                    <input type="range" 
                                        :value="weights.prestudy" 
                                        @input="updateWeight('prestudy', $event.target.value)"
                                        min="0" max="100" step="5"
                                        class="w-full slider h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer dark:bg-blue-700">
                                    <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400">
                                        <span>0%</span>
                                        <span>50%</span>
                                        <span>100%</span>
                                    </div>
                                </div>
                            </div>

                            <!-- 实验操作权重 -->
                            <div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center">
                                        <i class="fas fa-cogs text-green-600 dark:text-green-400 mr-2"></i>
                                        <h4 class="text-md font-medium text-green-800 dark:text-green-200">实验操作</h4>
                                    </div>
                                    <div class="text-2xl font-bold text-green-600 dark:text-green-400" x-text="weights.operation + '%'"></div>
                                </div>
                                <div class="space-y-3">
                                    <input type="range" 
                                        :value="weights.operation" 
                                        @input="updateWeight('operation', $event.target.value)"
                                        min="0" max="100" step="5"
                                        class="w-full slider h-2 bg-green-200 rounded-lg appearance-none cursor-pointer dark:bg-green-700">
                                    <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400">
                                        <span>0%</span>
                                        <span>50%</span>
                                        <span>100%</span>
                                    </div>
                                </div>
                            </div>

                            <!-- 课后考核权重 -->
                            <div class="bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center">
                                        <i class="fas fa-clipboard-check text-orange-600 dark:text-orange-400 mr-2"></i>
                                        <h4 class="text-md font-medium text-orange-800 dark:text-orange-200">课后考核</h4>
                                    </div>
                                    <div class="text-2xl font-bold text-orange-600 dark:text-orange-400" x-text="weights.assessment + '%'"></div>
                                </div>
                                <div class="space-y-3">
                                    <input type="range" 
                                        :value="weights.assessment" 
                                        @input="updateWeight('assessment', $event.target.value)"
                                        min="0" max="100" step="5"
                                        class="w-full slider h-2 bg-orange-200 rounded-lg appearance-none cursor-pointer dark:bg-orange-700">
                                    <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400">
                                        <span>0%</span>
                                        <span>50%</span>
                                        <span>100%</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 权重总和检查 -->
                        <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg mb-6">
                            <div class="flex items-center justify-between">
                                <span class="text-sm font-medium text-gray-700 dark:text-gray-300">权重总和：</span>
                                <div class="flex items-center">
                                    <span class="text-lg font-bold" 
                                        :class="(weights.prestudy + weights.operation + weights.assessment) === 100 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'"
                                        x-text="(weights.prestudy + weights.operation + weights.assessment) + '%'"></span>
                                    <i class="ml-2 fas" 
                                    :class="(weights.prestudy + weights.operation + weights.assessment) === 100 ? 'fa-check-circle text-green-600 dark:text-green-400' : 'fa-exclamation-triangle text-red-600 dark:text-red-400'"></i>
                                </div>
                            </div>
                            <div class="mt-2 text-xs" 
                                :class="(weights.prestudy + weights.operation + weights.assessment) === 100 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'">
                                <span x-show="(weights.prestudy + weights.operation + weights.assessment) === 100">✓ 权重设置正确</span>
                                <span x-show="(weights.prestudy + weights.operation + weights.assessment) !== 100">⚠ 权重总和必须为100%</span>
                            </div>
                        </div>

                        <!-- 计算公式说明 -->
                        <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
                            <h4 class="text-md font-medium text-blue-800 dark:text-blue-200 mb-2">计算公式</h4>
                            <div class="text-sm text-gray-700 dark:text-gray-300 font-mono bg-white dark:bg-gray-800 p-3 rounded border">
                                最终成绩 = 课前预习分数 × <span class="font-bold text-blue-600" x-text="weights.prestudy + '%'"></span> + 
                                实验操作分数 × <span class="font-bold text-green-600" x-text="weights.operation + '%'"></span> + 
                                课后考核分数 × <span class="font-bold text-orange-600" x-text="weights.assessment + '%'"></span>
                            </div>
                            
                            <!-- 调整提示 -->
                            <div class="mt-3 text-xs text-gray-600 dark:text-gray-400">
                                <i class="fas fa-info-circle mr-1"></i>
                                <span>提示：调整权重时，系统将自动调整权重以保持总和为100%</span>
                            </div>
                        </div>
                    </div>

                    <!-- 实验权重设置面板 -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6"
                        x-data="{
                            experimentWeights: {
                                'experiment1': 17, // 直流电机时域模型
                                'experiment2': 17, // 线性系统稳定性分析
                                'experiment3': 17, // 奈奎斯特稳定性分析
                                'experiment4': 17, // 超前校正补偿器的设计
                                'experiment5': 16, // 倒立摆系统的最优控制
                                'experiment6': 16  // 离散系统的数字校正
                            },
                            experiments: [
                                { key: 'experiment1', name: '直流电机时域模型' },
                                { key: 'experiment2', name: '线性系统稳定性分析' },
                                { key: 'experiment3', name: '奈奎斯特稳定性分析' },
                                { key: 'experiment4', name: '超前校正补偿器的设计' },
                                { key: 'experiment5', name: '倒立摆系统的最优控制' },
                                { key: 'experiment6', name: '离散系统的数字校正' }
                            ],
                            updateExperimentWeight(key, value) {
                                const newValue = Math.max(0, Math.min(100, parseInt(value) || 0));
                                this.experimentWeights[key] = newValue;
                            },
                            getWeightSum() {
                                return Object.values(this.experimentWeights).reduce((sum, weight) => sum + weight, 0);
                            },
                            resetExperimentWeights() {
                                this.experimentWeights = {
                                    'experiment1': 17,
                                    'experiment2': 17,
                                    'experiment3': 17,
                                    'experiment4': 17,
                                    'experiment5': 16,
                                    'experiment6': 16
                                };
                            },
                            saveExperimentSettings() {
                                if (this.getWeightSum() === 100) {
                                    // 这里可以发送到后端保存
                                    alert('实验权重设置已保存！');
                                } else {
                                    alert('权重总和必须为100%，请调整后再保存！');
                                }
                            }
                        }">

                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-medium text-gray-900 dark:text-white">实验权重设置</h3>
                            <div class="flex space-x-2">
                                <button @click="resetExperimentWeights()" 
                                        class="px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm rounded-md font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                    重置为平均分配
                                </button>
                                <button @click="saveExperimentSettings()" 
                                        class="px-4 py-2 bg-primary-500 text-white text-sm rounded-md font-medium hover:bg-primary-600 transition-colors">
                                    保存实验权重
                                </button>
                            </div>
                        </div>

                        <!-- 实验权重表格 -->
                        <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6">
                            <div class="space-y-4">
                                <template x-for="experiment in experiments" :key="experiment.key">
                                    <div class="flex items-center justify-between bg-white dark:bg-gray-800 p-4 rounded-lg">
                                        <!-- 实验名称 -->
                                        <div class="flex-1">
                                            <span class="text-sm font-medium text-gray-900 dark:text-white" 
                                                x-text="experiment.name"></span>
                                        </div>
                                        
                                        <!-- 权重设置 -->
                                        <div class="flex items-center space-x-2">
                                            <input type="number" 
                                                min="0" 
                                                max="100"
                                                :value="experimentWeights[experiment.key]"
                                                @input="updateExperimentWeight(experiment.key, $event.target.value)"
                                                class="w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-center">
                                            <span class="text-sm text-gray-500 dark:text-gray-400">%</span>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </div>

                        <!-- 权重总和检查 -->
                        <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg mb-4">
                            <div class="flex items-center justify-between">
                                <span class="text-sm font-medium text-gray-700 dark:text-gray-300">实验权重总和：</span>
                                <div class="flex items-center">
                                    <span class="text-xl font-bold" 
                                        :class="getWeightSum() === 100 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'"
                                        x-text="getWeightSum() + '%'"></span>
                                </div>
                            </div>
                            <div class="mt-2 text-xs" 
                                :class="getWeightSum() === 100 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'">
                                <span x-show="getWeightSum() === 100">✓ 实验权重设置正确</span>
                                <span x-show="getWeightSum() !== 100">
                                    ⚠ 实验权重总和必须为100%，当前总和为 <span x-text="getWeightSum()"></span>%
                                </span>
                            </div>
                        </div>

                        <!-- 操作提示 -->
                        <div class="bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg">
                            <div class="text-xs text-gray-600 dark:text-gray-400">
                                提示：请在输入框中直接输入各实验的权重百分比，确保所有实验权重总和为100%。
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="bg-white dark:bg-gray-800 shadow mt-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="flex flex-col items-center md:flex-row md:justify-between">
                <div class="text-center md:text-left">
                    <p class="text-sm text-gray-500 dark:text-gray-400">
                        © 2025 IECUBE. 保留所有权利。
                    </p>
                </div>
                <div class="mt-4 md:mt-0">
                    <div class="flex space-x-6">
                        <a href="#" class="text-gray-400 hover:text-gray-500 dark:hover:text-gray-300">
                            <i class="fab fa-github text-lg"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-gray-500 dark:hover:text-gray-300">
                            <i class="fab fa-linkedin text-lg"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-gray-500 dark:hover:text-gray-300">
                            <i class="fab fa-weixin text-lg"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- 图表初始化脚本 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 教师视角 - 课程进度
            const courseProgressChart = new Chart(
                document.getElementById('courseProgressChart'),
                {
                    type: 'bar',
                    data: {
                        labels: ['课程整体进度', '实验完成率', '知识点掌握率', '课程目标达成度'],
                        datasets: [{
                            label: '当前',
                            data: [68.2, 78.5, 76.3, 78.5],
                            backgroundColor: 'rgba(14, 165, 233, 0.8)',
                            borderColor: 'rgba(14, 165, 233, 1)',
                            borderWidth: 1,
                            barPercentage: 0.5,
                            categoryPercentage: 0.5
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                beginAtZero: true,
                                max: 100,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                }
            );
            // 教师视角 - 能力达成分析图表初始化
            const abilityAchievementChart = new Chart(
                document.getElementById('abilityAchievementChart'),
                {
                    type: 'radar',
                    data: {
                        labels: ['课程目标1', '课程目标2', '课程目标3', '课程目标4'],
                        datasets: [{
                            label: '平均达成度',
                            data: [85.2, 80.6, 75.3, 77.8],
                            backgroundColor: 'rgba(59, 130, 246, 0.2)',
                            borderColor: 'rgb(59, 130, 246)',
                            pointBackgroundColor: 'rgb(59, 130, 246)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgb(59, 130, 246)'
                        },
                        {
                            label: '最优达成度',
                            data: [95.2, 90.6, 85.3, 87.8],
                            backgroundColor: 'rgba(34, 197, 94, 0.2)',
                            borderColor: 'rgb(34, 197, 94)',
                            pointBackgroundColor: 'rgb(34, 197, 94)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgb(34, 197, 94)'
                        },
                        {
                            label: '最差达成度',
                            data: [75.2, 70.6, 65.3, 67.8],
                            backgroundColor: 'rgba(239, 68, 68, 0.2)',
                            borderColor: 'rgb(239, 68, 68)',
                            pointBackgroundColor: 'rgb(239, 68, 68)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgb(239, 68, 68)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                angleLines: {
                                    display: true,
                                    color: 'rgba(150, 150, 150, 0.2)'
                                },
                                pointLabels: {
                                    font: {
                                        size: 12
                                    }
                                },
                                ticks: {
                                    backdropColor: 'transparent',
                                    color: 'rgba(150, 150, 150, 0.8)',
                                    stepSize: 20
                                },
                                suggestedMin: 0,
                                suggestedMax: 100
                            }
                        }
                    }
                }
            );

            // 班级成绩分布
            const classScoreDistributionChart = new Chart(
                document.getElementById('classScoreDistributionChart'),
                {
                    type: 'bar',
                    data: {
                        labels: ['90-100', '80-89', '70-79', '60-69', '<60'],
                        datasets: [{
                            label: '学生人数',
                            data: [12, 25, 18, 5, 2],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.7)', // 绿色
                                'rgba(59, 130, 246, 0.7)', // 蓝色
                                'rgba(249, 115, 22, 0.7)', // 橙色
                                'rgba(234, 179, 8, 0.7)',  // 黄色
                                'rgba(239, 68, 68, 0.7)'   // 红色
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: '学生人数'
                                }
                            }
                        }
                    }
                }
            );

            // 各实验得分情况
            const experimentScoresChart = new Chart(
                document.getElementById('experimentScoresChart'),
                {
                    type: 'line',
                    data: {
                        labels: ['直流电机时域模型', '线性系统稳定性分析', '奈奎斯特稳定性分析', '超前校正补偿器的设计', '倒立摆系统的最优控制'],
                        datasets: [
                            {
                                label: '平均分',
                                data: [86.4, 85.1, 81.8, 83.6, 78.3],
                                borderColor: 'rgba(14, 165, 233, 1)',
                                backgroundColor: 'rgba(14, 165, 233, 0.2)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: '最高分',
                                data: [98, 97, 96, 95, 94],
                                borderColor: 'rgba(34, 197, 94, 1)',
                                borderDash: [5, 5],
                                tension: 0.4,
                                fill: false
                            },
                            {
                                label: '最低分',
                                data: [72, 70, 65, 68, 60],
                                borderColor: 'rgba(239, 68, 68, 1)',
                                borderDash: [5, 5],
                                tension: 0.4,
                                fill: false
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 50,
                                max: 100,
                                title: {
                                    display: true,
                                    text: '分数'
                                }
                            }
                        }
                    }
                }
            );

            // 与上学期对比分析
            const semesterComparisonChart = new Chart(
                document.getElementById('semesterComparisonChart'),
                {
                    type: 'bar',
                    data: {
                        labels: ['平均分', '通过率', 'AI使用率', '课程目标达成度'],
                        datasets: [
                            {
                                label: '本学期',
                                data: [83.6, 96.8, 87.3, 78.5],
                                backgroundColor: 'rgba(14, 165, 233, 0.7)',
                                borderColor: 'rgba(14, 165, 233, 1)',
                                borderWidth: 1
                            },
                            {
                                label: '上学期',
                                data: [80.4, 94.2, 79.2, 73.3],
                                backgroundColor: 'rgba(156, 163, 175, 0.7)',
                                borderColor: 'rgba(156, 163, 175, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 50,
                                max: 100,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                }
            );

            // AI互动主题分析
            const aiInteractionTopicsChart = new Chart(
                document.getElementById('aiInteractionTopicsChart'),
                {
                    type: 'pie',
                    data: {
                        labels: ['电路连接问题', '测量方法咨询', '数据分析与计算', '理论概念解释'],
                        datasets: [{
                            data: [35, 28, 22, 15],
                            backgroundColor: [
                                'rgba(59, 130, 246, 0.8)', // 蓝色
                                'rgba(34, 197, 94, 0.8)',  // 绿色
                                'rgba(249, 115, 22, 0.8)', // 橙色
                                'rgba(168, 85, 247, 0.8)'  // 紫色
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                }
            );

            // 实验难度对比
            const experimentDifficultyComparisonChart = new Chart(
                document.getElementById('experimentDifficultyComparisonChart'),
                {
                    type: 'bar',
                    data: {
                        labels: ['直流电机时域模型', '线性系统稳定性分析', '奈奎斯特稳定性分析', '超前校正补偿器的设计', '倒立摆系统的最优控制', '离散系统的数字校正'],
                        datasets: [{
                            label: '难度系数',
                            data: [2.4, 3.2, 3.5, 4.1, 4.8, 3.8],
                            backgroundColor: 'rgba(14, 165, 233, 0.7)',
                            borderColor: 'rgba(14, 165, 233, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                beginAtZero: true,
                                max: 5,
                                title: {
                                    display: true,
                                    text: '难度系数(1-5)'
                                }
                            }
                        }
                    }
                }
            );

            // 实验完成率对比
            const experimentCompletionRateChart = new Chart(
                document.getElementById('experimentCompletionRateChart'),
                {
                    type: 'bar',
                    data: {
                        labels: ['直流电机时域模型', '线性系统稳定性分析', '奈奎斯特稳定性分析', '超前校正补偿器的设计', '倒立摆系统的最优控制', '离散系统的数字校正'],
                        datasets: [{
                            label: '平均成绩',
                            data: [100, 100, 87.1, 93.5, 51.6, 0],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.7)', // 绿色
                                'rgba(34, 197, 94, 0.7)', // 绿色
                                'rgba(34, 197, 94, 0.7)', // 绿色
                                'rgba(34, 197, 94, 0.7)', // 绿色
                                'rgba(249, 115, 22, 0.7)', // 橙色
                                'rgba(156, 163, 175, 0.7)'  // 灰色
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                beginAtZero: true,
                                max: 100,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                }
            );

            // 实验成绩分布
            const experimentGradeDistributionChart = new Chart(
                document.getElementById('experimentGradeDistributionChart'),
                {
                    type: 'bar',
                    data: {
                        labels: ['90-100', '80-89', '70-79', '60-69', '<60'],
                        datasets: [{
                            label: '学生人数',
                            data: [18, 22, 15, 5, 2],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.7)', // 绿色
                                'rgba(59, 130, 246, 0.7)', // 蓝色
                                'rgba(249, 115, 22, 0.7)', // 橙色
                                'rgba(234, 179, 8, 0.7)',  // 黄色
                                'rgba(239, 68, 68, 0.7)'   // 红色
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    precision: 0
                                }
                            }
                        }
                    }
                }
            );

            // 课前预习时间分布
            let preStudyTimeDistributionChart = new Chart(
                document.getElementById('preStudyTimeDistributionChart'),
                {
                    type: 'bar',
                    data: {
                        labels: ['<0.5小时', '0.5-1小时', '1-1.5小时', '1.5-2小时', '2-2.5小时', '2.5-3小时', '>3小时'],
                        datasets: [{
                            label: '学生人数',
                            data: [8, 12, 15, 18, 6, 2, 1],
                            backgroundColor: [
                                'rgba(239, 68, 68, 0.7)',   // 红色
                                'rgba(249, 115, 22, 0.7)',  // 橙色
                                'rgba(234, 179, 8, 0.7)',   // 黄色
                                'rgba(34, 197, 94, 0.7)',   // 绿色
                                'rgba(59, 130, 246, 0.7)',  // 蓝色
                                'rgba(168, 85, 247, 0.7)',  // 紫色
                                'rgba(14, 165, 233, 0.7)'   // 靛蓝
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: '学生人数'
                                },
                                ticks: {
                                    precision: 0
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: '预习时间'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                }
            );

            // AI辅助使用次数分布
            let aiUsageDistributionChart = new Chart(
                document.getElementById('aiUsageDistributionChart'),
                {
                    type: 'bar',
                    data: {
                        labels: ['0次', '1-2次', '3-4次', '5-6次', '7-8次', '9-10次', '>10次'],
                        datasets: [{
                            label: '学生人数',
                            data: [9, 11, 16, 14, 8, 3, 1],
                            backgroundColor: [
                                'rgba(156, 163, 175, 0.7)', // 灰色
                                'rgba(239, 68, 68, 0.7)',   // 红色
                                'rgba(34, 197, 94, 0.7)',   // 绿色
                                'rgba(59, 130, 246, 0.7)',  // 蓝色
                                'rgba(249, 115, 22, 0.7)',  // 橙色
                                'rgba(234, 179, 8, 0.7)',   // 黄色
                                'rgba(168, 85, 247, 0.7)'   // 紫色
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: '学生人数'
                                },
                                ticks: {
                                    precision: 0
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'AI使用次数'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                }
            );

            // 课前预习时间与成绩关系
            let preStudyTimeVsScoreChart = new Chart(
                document.getElementById('preStudyTimeVsScoreChart'),
                {
                    type: 'scatter',
                    data: {
                        datasets: [{
                            label: '超前校正补偿器的设计',
                            data: generatePreStudyScoreData(),
                            backgroundColor: 'rgba(59, 130, 246, 0.6)',
                            borderColor: 'rgba(59, 130, 246, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: '课前预习时间 (小时)'
                                },
                                min: 0,
                                max: 4
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: '实验成绩'
                                },
                                min: 60,
                                max: 100
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                }
            );

            // AI使用次数与成绩关系
            let aiUsageVsScoreChart = new Chart(
                document.getElementById('aiUsageVsScoreChart'),
                {
                    type: 'scatter',
                    data: {
                        datasets: [{
                            label: '超前校正补偿器的设计',
                            data: generateAIUsageScoreData(),
                            backgroundColor: 'rgba(34, 197, 94, 0.6)',
                            borderColor: 'rgba(34, 197, 94, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'AI使用次数'
                                },
                                min: 0,
                                max: 12
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: '实验成绩'
                                },
                                min: 60,
                                max: 100
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                }
            );

            // 生成模拟数据的函数
            function generatePreStudyScoreData() {
                const data = [];
                for (let i = 0; i < 62; i++) {
                    const preStudyTime = Math.random() * 3.5;
                    const baseScore = 70 + preStudyTime * 8 + Math.random() * 15;
                    const score = Math.min(98, Math.max(65, baseScore));
                    data.push({x: preStudyTime, y: score});
                }
                return data;
            }

            function generateAIUsageScoreData() {
                const data = [];
                for (let i = 0; i < 62; i++) {
                    const aiUsage = Math.floor(Math.random() * 11);
                    let baseScore;
                    if (aiUsage <= 2) {
                        baseScore = 75 + Math.random() * 10;
                    } else if (aiUsage <= 6) {
                        baseScore = 80 + Math.random() * 15;
                    } else {
                        baseScore = 70 + Math.random() * 20;
                    }
                    const score = Math.min(98, Math.max(65, baseScore));
                    data.push({x: aiUsage, y: score});
                }
                return data;
            }

            // 根据实验生成不同的数据
            function generateDataForExperiment(experiment) {
                const experiments = {
                    '超前校正补偿器的设计': {
                        preStudyTime: [8, 12, 15, 18, 6, 2, 1],
                        aiUsage: [9, 11, 16, 14, 8, 3, 1]
                    },
                    '直流电机时域模型': {
                        preStudyTime: [5, 10, 18, 20, 7, 2, 0],
                        aiUsage: [15, 18, 12, 10, 5, 2, 0]
                    },
                    '线性系统稳定性分析': {
                        preStudyTime: [6, 14, 16, 16, 8, 2, 0],
                        aiUsage: [12, 15, 14, 12, 6, 3, 0]
                    },
                    '奈奎斯特稳定性分析': {
                        preStudyTime: [10, 16, 14, 14, 6, 2, 0],
                        aiUsage: [8, 12, 18, 15, 7, 2, 0]
                    },
                    '倒立摆系统的最优控制': {
                        preStudyTime: [12, 18, 12, 12, 5, 3, 0],
                        aiUsage: [6, 8, 14, 18, 12, 4, 0]
                    },
                    '离散系统的数字校正': {
                        preStudyTime: [8, 12, 15, 18, 6, 2, 1],
                        aiUsage: [9, 11, 16, 14, 8, 3, 1]
                    }
                };
                
                return experiments[experiment] || experiments['超前校正补偿器的设计'];
            }

            // 更新所有行为图表的函数
            window.updateAllBehaviorCharts = function() {
                const selectedExp = document.querySelector('[x-model="selectedExperiment"]').value || '超前校正补偿器的设计';
                const data = generateDataForExperiment(selectedExp);
                
                // 更新预习时间分布
                preStudyTimeDistributionChart.data.datasets[0].data = data.preStudyTime;
                preStudyTimeDistributionChart.update();
                
                // 更新AI使用分布
                aiUsageDistributionChart.data.datasets[0].data = data.aiUsage;
                aiUsageDistributionChart.update();
                
                // 更新关联图表
                preStudyTimeVsScoreChart.data.datasets[0].data = generatePreStudyScoreData();
                aiUsageVsScoreChart.data.datasets[0].data = generateAIUsageScoreData();
                
                preStudyTimeVsScoreChart.update();
                aiUsageVsScoreChart.update();
            };

            // 课程目标班级平均达成度雷达图
            // 教师视角 - 能力达成分析图表初始化
            const courseObjectiveAchievementChart = new Chart(
                document.getElementById('courseObjectiveAchievementChart'),
                {
                    type: 'radar',
                    data: {
                        labels: ['课程目标1', '课程目标2', '课程目标3', '课程目标4'],
                        datasets: [{
                            label: '平均达成度',
                            data: [85.2, 80.6, 75.3, 77.8],
                            backgroundColor: 'rgba(59, 130, 246, 0.2)',
                            borderColor: 'rgb(59, 130, 246)',
                            pointBackgroundColor: 'rgb(59, 130, 246)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgb(59, 130, 246)'
                        },
                        {
                            label: '最优达成度',
                            data: [95.2, 90.6, 85.3, 87.8],
                            backgroundColor: 'rgba(34, 197, 94, 0.2)',
                            borderColor: 'rgb(34, 197, 94)',
                            pointBackgroundColor: 'rgb(34, 197, 94)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgb(34, 197, 94)'
                        },
                        {
                            label: '最差达成度',
                            data: [75.2, 70.6, 65.3, 67.8],
                            backgroundColor: 'rgba(239, 68, 68, 0.2)',
                            borderColor: 'rgb(239, 68, 68)',
                            pointBackgroundColor: 'rgb(239, 68, 68)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgb(239, 68, 68)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                angleLines: {
                                    display: true,
                                    color: 'rgba(150, 150, 150, 0.2)'
                                },
                                pointLabels: {
                                    font: {
                                        size: 12
                                    }
                                },
                                ticks: {
                                    backdropColor: 'transparent',
                                    color: 'rgba(150, 150, 150, 0.8)',
                                    stepSize: 20
                                },
                                suggestedMin: 0,
                                suggestedMax: 100
                            }
                        }
                    }
                }
            );

            // 课程目标1学生达成度分布
            const objective1DistributionChart = new Chart(
                document.getElementById('objective1DistributionChart'),
                {
                    type: 'doughnut',
                    data: {
                        labels: ['优秀(90-100%)', '良好(80-89%)', '中等(70-79%)', '及格(60-69%)', '不及格(<60%)'],
                        datasets: [{
                            data: [18, 26, 12, 4, 2],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(249, 115, 22, 0.8)',
                                'rgba(234, 179, 8, 0.8)',
                                'rgba(239, 68, 68, 0.8)'
                            ],
                            borderWidth: 2,
                            borderColor: '#fff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    boxWidth: 12,
                                    font: {
                                        size: 10
                                    }
                                }
                            }
                        }
                    }
                }
            );

            // 课程目标2学生达成度分布
            const objective2DistributionChart = new Chart(
                document.getElementById('objective2DistributionChart'),
                {
                    type: 'doughnut',
                    data: {
                        labels: ['优秀(90-100%)', '良好(80-89%)', '中等(70-79%)', '及格(60-69%)', '不及格(<60%)'],
                        datasets: [{
                            data: [15, 24, 16, 5, 2],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(249, 115, 22, 0.8)',
                                'rgba(234, 179, 8, 0.8)',
                                'rgba(239, 68, 68, 0.8)'
                            ],
                            borderWidth: 2,
                            borderColor: '#fff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    boxWidth: 12,
                                    font: {
                                        size: 10
                                    }
                                }
                            }
                        }
                    }
                }
            );

            // 课程目标3学生达成度分布
            const objective3DistributionChart = new Chart(
                document.getElementById('objective3DistributionChart'),
                {
                    type: 'doughnut',
                    data: {
                        labels: ['优秀(90-100%)', '良好(80-89%)', '中等(70-79%)', '及格(60-69%)', '不及格(<60%)'],
                        datasets: [{
                            data: [12, 20, 18, 8, 4],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(249, 115, 22, 0.8)',
                                'rgba(234, 179, 8, 0.8)',
                                'rgba(239, 68, 68, 0.8)'
                            ],
                            borderWidth: 2,
                            borderColor: '#fff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    boxWidth: 12,
                                    font: {
                                        size: 10
                                    }
                                }
                            }
                        }
                    }
                }
            );

            // 课程目标4学生达成度分布
            const objective4DistributionChart = new Chart(
                document.getElementById('objective4DistributionChart'),
                {
                    type: 'doughnut',
                    data: {
                        labels: ['优秀(90-100%)', '良好(80-89%)', '中等(70-79%)', '及格(60-69%)', '不及格(<60%)'],
                        datasets: [{
                            data: [8, 16, 20, 12, 6],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(249, 115, 22, 0.8)',
                                'rgba(234, 179, 8, 0.8)',
                                'rgba(239, 68, 68, 0.8)'
                            ],
                            borderWidth: 2,
                            borderColor: '#fff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    boxWidth: 12,
                                    font: {
                                        size: 10
                                    }
                                }
                            }
                        }
                    }
                }
            );

            // 课程目标达成度趋势
            const goalAchievementTrendChart = new Chart(
                document.getElementById('goalAchievementTrendChart'),
                {
                    type: 'line',
                    data: {
                        labels: ['学期初', '第一次实验后', '第二次实验后', '第三次实验后', '当前'],
                        datasets: [
                            {
                                label: '课程目标1',
                                data: [55, 68, 78, 85, 92],
                                borderColor: 'rgba(16, 185, 129, 1)',
                                backgroundColor: 'rgba(16, 185, 129, 0.1)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: '课程目标2',
                                data: [50, 65, 75, 82, 88],
                                borderColor: 'rgba(59, 130, 246, 1)',
                                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: '课程目标3',
                                data: [52, 60, 72, 78, 85],
                                borderColor: 'rgba(239, 68, 68, 1)',
                                backgroundColor: 'rgba(239, 68, 68, 0.1)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: '课程目标4',
                                data: [45, 55, 65, 72, 78],
                                borderColor: 'rgba(251, 191, 36, 1)',
                                backgroundColor: 'rgba(251, 191, 36, 0.1)',
                                tension: 0.4,
                                fill: true
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 40,
                                max: 100,
                                title: {
                                    display: true,
                                    text: '达成度 (%)'
                                }
                            }
                        }
                    }
                }
            );

            // 教学改进效果预测
            const improvementProjectionChart = new Chart(
                document.getElementById('improvementProjectionChart'),
                {
                    type: 'bar',
                    data: {
                        labels: ['理论应用能力达标率', '高频模型理解问题', '学习困难学生比例', '课程通过率'],
                        datasets: [
                            {
                                label: '当前状态',
                                data: [68.2, 50, 30, 84],
                                backgroundColor: 'rgba(59, 130, 246, 0.7)',
                                borderColor: 'rgba(59, 130, 246, 1)',
                                borderWidth: 1
                            },
                            {
                                label: '实施改进后(预期)',
                                data: [80, 25, 21, 92],
                                backgroundColor: 'rgba(34, 197, 94, 0.7)',
                                borderColor: 'rgba(34, 197, 94, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                ticks: {
                                    autoSkip: false,
                                    maxRotation: 0,
                                    minRotation: 0
                                }
                            },
                            y: {
                                beginAtZero: true,
                                max: 100,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                }
            );

            // 特定能力分布图 - 电路分析能力
            const circuitAnalysisDistributionChart = new Chart(
                document.getElementById('circuitAnalysisDistributionChart'),
                {
                    type: 'doughnut',
                    data: {
                        labels: ['精通 (90-100%)', '熟练 (80-89%)', '良好 (70-79%)', '基础 (60-69%)', '待提升 (<60%)'],
                        datasets: [{
                            data: [15, 28, 12, 5, 2],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(249, 115, 22, 0.8)',
                                'rgba(234, 179, 8, 0.8)',
                                'rgba(239, 68, 68, 0.8)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                                labels: {
                                    boxWidth: 15,
                                    font: {
                                        size: 10
                                    }
                                }
                            }
                        }
                    }
                }
            );

            // 实验操作能力分布
            const experimentOperationDistributionChart = new Chart(
                document.getElementById('experimentOperationDistributionChart'),
                {
                    type: 'doughnut',
                    data: {
                        labels: ['精通 (90-100%)', '熟练 (80-89%)', '良好 (70-79%)', '基础 (60-69%)', '待提升 (<60%)'],
                        datasets: [{
                            data: [12, 25, 18, 5, 2],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(249, 115, 22, 0.8)',
                                'rgba(234, 179, 8, 0.8)',
                                'rgba(239, 68, 68, 0.8)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                                labels: {
                                    boxWidth: 15,
                                    font: {
                                        size: 10
                                    }
                                }
                            }
                        }
                    }
                }
            );

            // 理论应用能力分布
            const theoryApplicationDistributionChart = new Chart(
                document.getElementById('theoryApplicationDistributionChart'),
                {
                    type: 'doughnut',
                    data: {
                        labels: ['精通 (90-100%)', '熟练 (80-89%)', '良好 (70-79%)', '基础 (60-69%)', '待提升 (<60%)'],
                        datasets: [{
                            data: [5, 18, 20, 15, 4],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(249, 115, 22, 0.8)',
                                'rgba(234, 179, 8, 0.8)',
                                'rgba(239, 68, 68, 0.8)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                                labels: {
                                    boxWidth: 15,
                                    font: {
                                        size: 10
                                    }
                                }
                            }
                        }
                    }
                }
            );
        });
    </script>
</body>
</html>